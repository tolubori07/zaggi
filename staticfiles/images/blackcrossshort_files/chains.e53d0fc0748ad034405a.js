"use strict";(self["webpackChunk"]=self["webpackChunk"]||[]).push([[349],{55375:function(e,t,o){o.d(t,{t5:function(){return h},Oh:function(){return f},zi:function(){return y},EU:function(){return g},aP:function(){return b},Sd:function(){return P}});var r=o(59312);var n=o(82030);var i=o(87950);var a=o(48814);var s=o(24316);var c=o(63305);var d=o(6086);var l=o(38763);var u=o(64564);const p=(0,n.default)("CHAINS");const v=(0,i.F)(p);function m(e,{chains:{chainList:t}}){return t.find(t=>t.name===e)}const h=(e,t={})=>(o,r)=>{if(m(e,r()))throw new Error(`Chain ${e} has already started`);return o({type:l.E$,meta:{name:e,ops:Object.assign(Object.assign({},t),(0,a.x)())}})};const f=(e,t={})=>(o,r)=>{if(!m(e,r()))throw new Error(`Chain ${e} has not been started yet`);return o({type:l.xv,meta:{name:e,ops:t}})};const y=(e,t={})=>(o,r)=>(e.forEach(e=>{if(!m(e,r()))throw new Error(`Chain ${e} has not been started yet`)}),o({type:l.Ql,meta:{names:e,ops:t}}));const g=e=>(t,o)=>{if(!m(e,o()))throw new Error(`Chain ${e} has not been started yet`);return t({type:l.iP,meta:{name:e}})};function b(e,t){return(o,{onError:n,onSuccess:i,onComplete:a}={})=>s=>(0,r.mG)(this,void 0,void 0,function*(){s(h(e,{[u.G.thunkChain]:!0}));try{yield s(t(o)),null==i||i()}catch(t){(null==t?void 0:t.chainWasInterrupted)||(null==n||n(),c.G.captureException(new d.Vj((null==t?void 0:t.message)||"Unknown chain error"),{tags:{chainName:e}}))}null==a||a(),s(g(e))})}const P=v("CANCEL_TOUR",({chain:e,cookieKey:t,cookieValue:o},r)=>{s.Q.set(t,o),r(f(e,{processAction:!0}))})},24113:function(e,t,o){o.d(t,{j:function(){return F},Z:function(){return R}});var r=o(61235);var n=o(87323);var i=o(55375);var a=o(1994);var s=o(24316);var c=o(62189);var d=o(97754);var l=o(82726);var u=o(6573);var p=o(18376);var v=o(66970);var m=o(61835);var h=o(4717);var f=o(41077);var y=o(22559);const g=(0,c.iN)(u.zG.brandKitTourPart1);const b=(0,c.iN)(u.zG.brandKitTourPart2);const P=(0,i.Sd)({chain:u.zG.brandKitTourPart1,cookieKey:p.E9.brandKitTourViewed,cookieValue:"5"});const j=(0,i.Oh)(u.zG.brandKitTourPart1,{processAction:!0});const T=(0,i.Oh)(u.zG.brandKitTourPart2,{processAction:!0});const w=(0,c.$S)("brandKitTour");const G=3;const I=16;const S=18;const C=16;const k=352;const E=67;const x=387;const O=64;const F=e=>!e&&Number(s.Q.get(p.E9.brandKitTourViewed))<3;const R={steps:[{tooltipKey:m.B.brandKitTourTip1,options:{title:"brandkit_tour_title_1",description:"brandkit_tour_text_1",buttonType:l.L.next,currentStep:1,totalSteps:5,overridePosition:(e,t)=>{const{left:o,top:r,width:n}=(0,c.au)(t);return{left:o+n+I,top:r-S}},gtmOptions:w(1,"buttonNext"),pinClassName:y.Z.leftTop},onNextActions:[g(1)],onCancelActions:[P]},{tooltipKey:m.B.brandKitTourTip2,options:{title:"brandkit_tour_title_2",description:"brandkit_tour_text_2",buttonType:l.L.next,currentStep:2,totalSteps:5,overridePosition:(e,t)=>{const{left:o,top:r,width:n}=(0,c.au)(t);return{left:o+n+I,top:r-S}},gtmOptions:w(2,"buttonNext"),pinClassName:y.Z.leftTop},onNextActions:[g(2)],onCancelActions:[P]},{tooltipKey:m.B.brandKitTourTip3,options:{title:"brandkit_tour_title_3",description:"brandkit_tour_text_3",buttonType:l.L.next,currentStep:3,totalSteps:5,overridePosition:(e,t)=>{const{left:o,top:r,height:n}=(0,c.au)(t);return{left:o,top:r+n+C}},gtmOptions:w(3,"buttonNext"),pinClassName:y.Z.topLeft,stepClassName:y.Z.wideTip},onNextActions:[g(3)],onCancelActions:[P]},{tooltipKey:m.B.brandKitTourTip4,options:{title:"brandkit_tour_title_4",description:"brandkit_tour_text_4",buttonType:l.L.createDesign,className:f.Z.tooltipWithOverlay,currentStep:4,totalSteps:5,stepClassName:y.Z.wideTip,gtmOptions:w(4,"buttonCreateDesign")},onNextActions:[(0,r.h7)({popup:h.n.quickNewDesign,options:{sidebar:u.Gj.brandKit,shouldCloseOnOverlayClick:!1}}),j],onCancelActions:[P]},{tooltipKey:m.B.brandKitTourTip5,options:{title:"brandkit_tour_title_5",description:"brandkit_tour_text_5",buttonType:l.L.finish,currentStep:5,totalSteps:5,overridePosition:(e,t)=>{const{left:o,top:r,width:n}=(0,c.au)(t);return{left:o+n+k,top:r+E}},gtmOptions:w(5,"buttonGotIt"),pinClassName:y.Z.leftTop},onShowActions:[(0,a.JW)({activeSidebarTab:u.Gj.brandKit})],onNextActions:[b(5)],onCancelActions:[b(5)]},{tooltipKey:m.B.tutorialsTourTip,options:{title:"tutorial_tooltip_title",description:"tutorial_tooltip_body",buttonType:l.L.finish,overridePosition:(e,t)=>{const{left:o,top:r,width:n}=(0,c.au)(t);return{left:o+n-x,top:r+O}},gtmOptions:w(6,"buttonGotIt"),pinClassName:y.Z.topRight,stepClassName:y.Z.wideTip},onShowActions:[(0,n.ci)()],onNextActions:[T],onCancelActions:[T]}],shouldProcessCheck:e=>{const{auth:{currentUser:t},common:{currentPage:o},sidebar:{isSidebarOpened:r},partner:{currentPartner:n}}=e.getState();const i=new URLSearchParams(null===d.m||void 0===d.m?void 0:d.m.location.search).get("sidebar");return!(Number(s.Q.get(p.E9.brandKitTourViewed))+1===R.steps.length-1&&!t.id)&&(Number(s.Q.get(R.cookieKey))<R.steps.length-1&&(v.s.artBoard===o&&i===u.Gj.brandKit&&r&&Number(s.Q.get(R.cookieKey))>=3||v.s.brandKit===o&&F(n))&&!Boolean(n))},cookieKey:p.E9.brandKitTourViewed}},31575:function(e,t,o){o.d(t,{a:function(){return F},Q:function(){return O}});var r=o(6573);var n=o(82726);var i=o(51042);var a=o(87323);var s=o(55375);var c=o(1994);var d=o(24316);var l=o(62189);var u=o(97754);var p=o(18376);var v=o(66970);var m=o(61835);var h=o(22559);const f=(0,l.iN)(r.zG.artBoardTour);const y=f(6);const g=(0,s.Oh)(r.zG.artBoardTour,{processAction:!0});const b=(0,l.$S)("editorTourTips");const P=352;const j=246;const T=130;const w=242;const G=198;const I=378;const S=24;const C=387;const k=64;const E={steps:[{tooltipKey:m.B.artboardTourTip1,options:{title:"tour_title_1",description:"tour_text_1",buttonType:n.L.next,currentStep:1,totalSteps:6,overridePosition:(e,t)=>{const{left:o,top:r,width:n}=(0,l.au)(t);return{left:o+n+P,top:r+j}},gtmOptions:b(1,"buttonNext"),pinClassName:h.Z.leftTop},onShowActions:[(0,c.JW)({activeSidebarTab:r.Gj.designs})],onNextActions:[f(1)],onCancelActions:[y]},{tooltipKey:m.B.artboardTourTip2,options:{title:"tour_title_2",description:"tour_text_2",buttonType:n.L.next,currentStep:2,totalSteps:6,overridePosition:(e,t)=>{const{left:o,top:r,width:n}=(0,l.au)(t);return{left:o+n+P,top:r+j}},gtmOptions:b(2,"buttonNext"),pinClassName:h.Z.leftTop},onShowActions:[(0,c.JW)({activeSidebarTab:r.Gj.photos})],onNextActions:[f(2)],onCancelActions:[y]},{tooltipKey:m.B.artboardTourTip3,options:{title:"tour_title_3",description:"tour_text_3",buttonType:n.L.next,currentStep:3,totalSteps:6,overridePosition:(e,t)=>{const{left:o,top:r,width:n}=(0,l.au)(t);return{left:o+n+P,top:r+T}},gtmOptions:b(3,"buttonNext"),pinClassName:h.Z.leftTop},onShowActions:[(0,c.JW)({activeSidebarTab:r.Gj.library})],onNextActions:[f(3)],onCancelActions:[y]},{tooltipKey:m.B.artboardTourTip4,options:{title:"tour_title_4",description:"tour_text_4",buttonType:n.L.next,currentStep:4,totalSteps:6,overridePosition:(e,t)=>{const{left:o,top:r,width:n}=(0,l.au)(t);return{left:o+n+P,top:r+w}},gtmOptions:b(4,"buttonNext"),pinClassName:h.Z.leftTop},onShowActions:[(0,c.JW)({activeSidebarTab:r.Gj.objects,activeObjectsTab:p.Q2.animated})],onNextActions:[f(4)],onCancelActions:[y]},{tooltipKey:m.B.artboardTourTip5,options:{title:"tour_title_5",description:"tour_text_5",buttonType:n.L.next,currentStep:5,totalSteps:6,overridePosition:(e,t)=>{const{left:o,top:r,width:n}=(0,l.au)(t);return{left:o+n+P,top:r+G}},gtmOptions:b(5,"buttonNext"),pinClassName:h.Z.leftTop},onShowActions:[(0,c.JW)({activeSidebarTab:r.Gj.music})],onNextActions:[f(5)],onCancelActions:[y]},{tooltipKey:m.B.artboardTourTip6,options:{title:"tour_title_6",description:"tour_text_6",buttonType:n.L.finish,currentStep:6,totalSteps:6,overridePosition:(e,t)=>{const{left:o,top:r,width:n,height:i}=(0,l.au)(t);return{left:o+n-I,top:r+i+S}},gtmOptions:b(6,"buttonGotIt"),pinClassName:h.Z.topRight,stepClassName:h.Z.wideTip},onShowActions:[(0,c.JW)({activeSidebarTab:r.Gj.designs})],onNextActions:[f(6)],onCancelActions:[y]},{tooltipKey:m.B.tutorialsTourTip,options:{title:"tutorial_tooltip_title",description:"tutorial_tooltip_body",buttonType:n.L.finish,overridePosition:(e,t)=>{const{left:o,top:r,width:n}=(0,l.au)(t);return{left:o+n-C,top:r+k}},gtmOptions:b(7,"buttonGotIt"),pinClassName:h.Z.topRight,stepClassName:h.Z.wideTip},onShowActions:[(0,a.ci)()],onNextActions:[g],onCancelActions:[g]}],shouldProcessCheck:e=>{const{auth:{currentUser:t},common:{currentPage:o},sidebar:{isSidebarOpened:n},partner:{currentPartner:a},projectData:{project:{group:s}}}=e.getState();const c=new URLSearchParams(null===u.m||void 0===u.m?void 0:u.m.location.search).get("sidebar");return!(Number(d.Q.get(p.E9.tourTipsViewed))+1===E.steps.length-1&&!t.id)&&((!c||c===r.Gj.designs)&&s!==i.W8.Custom&&Number(d.Q.get(E.cookieKey))<E.steps.length-1&&v.s.artBoard===o&&n&&!Boolean(a))},cookieKey:p.E9.tourTipsViewed};var x=o(24113);const O={[n.L.next]:{src:"wing/icons/arrow-small.svg",iconDirection:"right",locale:"next_button"},[n.L.createDesign]:{src:"wing/icons/arrow-small.svg",iconDirection:"right",locale:"create_design_button"},[n.L.finish]:{src:"wing/icons/checkmark.svg",iconDirection:"bottom",locale:"got_it_button"},[n.L.okGotIt]:{src:"wing/icons/checkmark.svg",iconDirection:"bottom",locale:"ok_got_it_button"}};const F={[r.zG.artBoardTour]:E,[r.zG.brandKitTourPart1]:x.Z,[r.zG.brandKitTourPart2]:x.Z}},82726:function(e,t,o){var r;o.d(t,{L:function(){return r}}),function(e){e["next"]="next",e["createDesign"]="createDesign",e["finish"]="finish",e["okGotIt"]="okGotIt"}(r||(r={}))},91525:function(e,t,o){o.d(t,{$:function(){return fo}});var r=o(55375);var n=o(61235);class i{constructor(e,t,o={}){this.chainName=e,this.dispatch=t.dispatch,this.mapContext(t,o)}getCurrentChain(e){const{chains:{chainList:t}}=e.getState();return t.find(e=>e.name===this.chainName)}}var a=o(4717);class s extends i{mapContext(e){this.project=e.getState().projectData.project}resolve(){return this.dispatch((0,n.h7)({popup:a.n.resizeProjectModal,options:{project:this.project}}))}}var c=o(20472);class d extends i{resolve(){this.callback(),this.dispatch((0,r.EU)(this.chainName))}mapContext(e,{success:t=!1}){var o;const{onSuccess:r,onError:n}=(null===(o=this.getCurrentChain(e))||void 0===o?void 0:o.ops)||{};this.callback=(t?r:n)||c.Z}}var l=o(55595);class u extends i{resolve(){return this.inTemplateEditingMode}mapContext(e){const{editingMode:t}=e.getState().artboard;this.inTemplateEditingMode=t===l.a.template}}var p=o(50692);var v=o(19807);var m=o(3681);class h extends i{resolve(){return this.value}mapContext(e,{key:t,transform:o}){this.value=t.reduce((e,t)=>e[t],e.getState()),o&&(this.value=o.call(this,this.value))}}class f extends i{resolve(){return this.option}mapContext(e,{key:t,transform:o}){var r;this.option=null===(r=this.getCurrentChain(e))||void 0===r?void 0:r.ops[t],o&&(this.option=o.call(this,this.option))}}class y extends i{mapContext(e){this.isReady=e.getState().arbiter.isReady}resolve(){return this.isReady}}var g=o(14385);class b extends i{mapContext(e){const{projectData:{loading:t,project:o}}=e.getState();this.isSyncing=!!t||(0,g.Qr)(o)}resolve(){return this.isSyncing}}var P=o(22232);class j extends i{resolve(){(0,P.dC)(()=>this.actions.forEach(e=>this.dispatch(e)))}mapContext(e,{action:t}){this.actions=t}}class T extends i{resolve(){this.dispatch((0,r.Oh)(this.chainName,this.options))}mapContext(e,t){this.options=t}}class w extends i{resolve(){this.dispatch((0,r.Oh)(this.chainName,{expectedActions:this.expectedActions}))}mapContext(e,{actionTypes:t}){var o,r,n;this.expectedActions=null!==(n=null===(r=null===(o=this.getCurrentChain(e))||void 0===o?void 0:o.ops.expectedActions)||void 0===r?void 0:r.concat(t))&&void 0!==n?n:[]}}var G=o(70874);var I=o(87134);class S extends i{mapContext(e){this.project=e.getState().projectData.project}resolve(){if(!(0,G.X)(this.project))throw Error(I.yp);return this.dispatch((0,r.Oh)(this.chainName,{project:this.project}))}}const[,C,k]=m.qZ;function E(e){return{entry:f,options:{key:"projectSynced",transform:Boolean},children:[{parentResult:!0,break:!0,entry:h,options:{key:["projectData","error"],transform:Boolean},children:[{parentResult:!0,break:!0,entry:d},{entry:S,children:[Object.assign({},e)]}]},{entry:y,children:[{parentResult:!1,break:!0,entry:w,options:{actionTypes:[v.Nu]}},{entry:b,children:[{parentResult:!1,entry:j,options:{action:[(0,p.W3)(!0)]}},{entry:T,options:{projectSynced:!0}},{entry:w,options:{actionTypes:[`${v.yn}_${C}`,`${v.yn}_${k}`]}}]}]}]}}var x=o(6573);class O extends i{resolve(){return this.isOneOf}mapContext(e,{chainNames:t}){this.isOneOf=t.includes(this.chainName)}}function F(e){return{entry:O,options:{chainNames:[x.zG.saveProject]},children:[Object.assign({parentResult:!0,break:!0},E(e)),e]}}function R(e){return{entry:u,children:[Object.assign({parentResult:!0,break:!0},F(e)),Object.assign({},E(e))]}}var A=o(66970);class z extends i{resolve(){return this.shouldRefresh}mapContext(e){const{modal:{popup:t},common:{currentPage:o}}=e.getState();this.shouldRefresh=t&&x.f0.includes(t)||A.C.includes(o)}}var M=o(97754);var D=o(98605);class N extends i{resolve(){this.path&&M.m&&M.m.replace(this.path)}mapContext(e){const{common:{language:t}}=e.getState();const{location:{pathname:o,search:r}}=window;let n=o.split("/")[1];n=D.ih[n]?n:D.X9,n!==t&&(this.path=o.replace(new RegExp(`^${D.ih[n].prefix}/`),`${D.ih[t].prefix}/`)+r)}}class B extends i{resolve(){return this.pages.includes(this.currentPage)}mapContext(e,{pages:t}){this.currentPage=e.getState().common.currentPage,this.pages=t}}class _ extends i{resolve(){this.dispatch((0,n.h7)({popup:this.popup,options:{source:this.source,shouldCloseOnOverlayClick:this.shouldCloseOnOverlayClick,email:this.email,token:this.token,authPreviewPath:this.authPreviewPath}}))}mapContext(e){var t;const{popup:o=a.n.registration,shouldCloseOnOverlayClick:r=!0,email:n,token:i,authPreviewPath:s}=(null===(t=this.getCurrentChain(e))||void 0===t?void 0:t.ops)||{};switch(this.popup=o,this.email=n,this.token=i,this.shouldCloseOnOverlayClick=r,this.authPreviewPath=s,this.chainName){case x.zG.openResizeProjectModal:this.source=x._J.resize;break;case x.zG.saveProject:this.source=x._J.save}}}var U=o(59725);var K=o(59556);var J=o(20638);const L=new Map([[A.s.landing,"/"],[A.s.team,"/team/settings/"],[A.s.subscription,"/user/settings/subscription/"]]);class $ extends i{resolve(){null===M.m||void 0===M.m||M.m.push(this.url)}mapContext(e,{pageName:t,withSearch:o=!1}){const{common:{language:r},team:{currentTeam:n}}=e.getState();this.url=this.getUrl(t,n,r),o&&M.m&&(this.url+=M.m.location.search)}getUrl(e,t,o){switch(e){case A.s.home:return(0,K.cd)({currentTeam:t,language:o});case A.s.signUp:return(0,J.B8)((null===M.m||void 0===M.m?void 0:M.m.location.pathname)||"",o);case A.s.myProjects:return(0,K.jq)({currentTeam:t,language:o});default:return D.ih[o].prefix+L.get(e)}}}var Q=o(56564);const[,V]=m.qZ;function Z(e){return{entry:h,options:{key:["auth","currentUser","id"],transform:Boolean},children:[{parentResult:!0,break:!0,entry:z,children:[{parentResult:!0,entry:j,options:{action:[(0,Q.A)()]}},{entry:N},Object.assign({},e)]},{entry:B,options:{pages:A.C},children:[{parentResult:!0,break:!0,entry:T,options:{authorizationFormWasOpen:!0},children:[{entry:w,options:{actionTypes:[`${U.w8}_${V}`,m.XS]}}]},{entry:f,options:{key:"authorizationFormWasOpen",transform:Boolean},children:[{parentResult:!0,break:!0,entry:d},{entry:h,options:{key:["common","userAgent","isMobile"],transform:Boolean},children:[{parentResult:!0,break:!0,entry:$,options:{pageName:A.s.signUp},children:[{entry:w,options:{actionTypes:[m.XS]}}]},{entry:_},{entry:T,options:{authorizationFormWasOpen:!0}},{entry:w,options:{actionTypes:[n.Mr.type,`${U.w8}_${V}`]}}]}]}]}]}}const W=Object.assign({},Z(Object.assign({},R({entry:s,children:[{entry:d}]}))));var H=o(2636);class q extends i{resolve(){return this.isOpen}mapContext(e){this.isOpen=!!e.getState().modal.popup}}const X={entry:q,children:[{parentResult:!0,break:!0,entry:w,options:{actionTypes:[n.Mr.type]}},{entry:j,options:{action:[(0,H.g)(x.JF.successPurchase)]}},{entry:d}]};var Y=o(23772);class ee extends i{resolve(){return this.currentPage}mapContext(e){this.currentPage=e.getState().common.currentPage}}class te extends i{mapContext(e){this.isLoading=e.getState().common.localeLoading||!1}resolve(){return this.isLoading}}const oe={entry:ee,children:[{parentResult:A.s.account,break:!0,entry:te,children:[{parentResult:!0,break:!0,entry:w,options:{actionTypes:[Y.X1.async.done.type]}},{entry:j,options:{action:[(0,H.g)(x.JF.profileChanged)]}},{entry:d}]},{entry:d}]};var re=o(85393);var ne=o(50546);var ie=o(77302);var ae=o(32214);var se=o(1994);var ce=o(54359);var de=o(87323);var le=o(91068);var ue=o(39543);var pe=o(12931);var ve=o(29566);var me=o(19258);var he=o(86079);var fe=o(70526);var ye=o(7343);var ge=o(47523);var be=o(18154);var Pe=o(95137);class je extends i{resolve(){return this.shouldSave}mapContext(e){const{projectData:{project:t,isDraft:o,loading:r,error:n}}=e.getState();this.shouldSave=(0,G.X)(t)&&!n&&!r&&o&&(!!t.id||!(0,Pe.Po)(t))}}const Te=0;const we={entry:je,children:[{parentResult:!0,entry:j,options:{action:[(0,p.W3)(!0)]}},{entry:j,options:{action:[(0,p.Pv)(),(0,ce.b3)(!0),(0,de.fT)(),(0,se.M0)(),(0,ie.oA)(),(0,ae.oA)(),(0,re.oA)(),(0,me.oA)(),(0,pe.x)(be.F.stockVideos),(0,pe.x)(be.F.partnerPhotos),(0,pe.x)(be.F.premiumPhotos),(0,pe.x)(be.F.stockPhotos),(0,pe.x)(be.F.animations),(0,pe.x)(be.F.graphics),(0,pe.x)(be.F.textStyles),(0,ve.xs)(),(0,ue.H)(ge.g.animations),(0,ue.H)(ge.g.object),(0,ue.H)(ge.g.design),(0,le.f9)(ye.g.animations),(0,le.f9)(ye.g.objects),(0,le.f9)(ye.g.design),(0,he.j)(),(0,fe.RN)(),(0,ne.EZ)(0)]}},{entry:ee,children:[{parentResult:A.s.artBoard,break:!0,entry:d},{entry:j,options:{action:[(0,p.Qr)()]}},{entry:d}]}]};class Ge extends i{resolve(){return this.value}mapContext(e,{key:t,transform:o}){this.value=new URLSearchParams(null===M.m||void 0===M.m?void 0:M.m.location.search).get(t),o&&(this.value=o.call(this,this.value))}}class Ie extends i{resolve(){window.location.href=this.url}mapContext(){const e=new URLSearchParams(null===M.m||void 0===M.m?void 0:M.m.location.search).get("token");this.url=`/api/teams/invite/?inviteToken=${e}`}}class Se extends i{resolve(){this.url&&(null===M.m||void 0===M.m||M.m.replace(this.url))}mapContext(e){const{auth:{currentUser:{language:t}},common:{currentPage:o}}=e.getState();A.C.includes(o)&&M.m&&(this.url=(0,K.Uv)(t,M.m.location.search))}}function Ce(e){return Object.assign({},Z({entry:Ge,options:{key:"token",transform:Boolean},children:[{parentResult:!0,break:!0,entry:Ie},{entry:Se},Object.assign({},e)]}))}class ke extends i{resolve(){return this.isRunning}mapContext(e,{ignoreChains:t=[],runningChains:o}){const{chains:{chainList:r}}=e.getState();if(o)return void(this.isRunning=r.some(({name:e})=>o.includes(e)));const n=[this.chainName,...t];this.isRunning=r.some(({name:e})=>!n.includes(e))}}const Ee={entry:ke,options:{runningChains:[x.zG.tryDownloadAsset]},children:[Object.assign({parentResult:!1,break:!0},Ce({entry:d,options:{success:!0}})),{entry:d}]};class xe extends i{resolve(){return this.dispatch((0,H.g)(x.JF.emailVerified,{email:this.email}))}mapContext(){this.email=new URLSearchParams(null===M.m||void 0===M.m?void 0:M.m.location.search).get("emailVerified")||void 0}}const Oe={entry:Ge,options:{key:"emailVerified",transform:Boolean},children:[{parentResult:!0,entry:xe,children:[{entry:h,options:{key:["common","userAgent","isMobile"],transform:Boolean},children:[{parentResult:!0,entry:$,options:{pageName:A.s.landing}}]}]},{entry:d}]};var Fe=o(75888);var Re=o(68578);var Ae=o(24316);var ze=o(18376);class Me extends i{resolve(){return Ae.Q.set(ze.E9.emailVerifiedDisabled,this.value,{expiresIn:x.IJ})}mapContext(){this.value=(0,Re.Z)(new Date,x.IJ).toString()}}class De extends i{resolve(){setTimeout(()=>{this.actions.forEach(e=>this.dispatch(e))},this.time)}mapContext(e,{actions:t,time:o}){this.actions=t,this.time=o}}const Ne={entry:h,options:{key:["emailVerified","isEmailVerificationDisabled"],transform:Boolean},children:[{parentResult:!0,entry:d,break:!0},{entry:j,options:{action:[(0,Fe.uz)(!0),(0,Fe.w$)()]}},{entry:Me},{entry:De,options:{actions:[(0,Fe.uz)(!1)],time:x.IJ}},{entry:d}]};class Be extends i{resolve(){return this.shouldRender}mapContext(e){const{common:{userAgent:t},auth:{currentUser:o}}=e.getState();this.shouldRender=!t.isMobile&&!!o.id&&!o.emailVerified&&o.sourceProvider!==ze.TN.crelloButtonPartner}}class _e extends i{resolve(){return this.value}mapContext(e,{key:t,transform:o}){this.value=Ae.Q.get(t),o&&(this.value=o.call(this,this.value))}}function Ue(e){return{entry:h,options:{key:["emailVerified","shouldRenderEmailVerified"]},children:[{parentResult:!e,entry:j,options:{action:[(0,Fe.un)(e)]}}]}}const Ke={entry:Be,children:[{parentResult:!0,entry:B,options:{pages:[A.s.home,A.s.myProjects,A.s.formats,A.s.brandKit,A.s.collection,A.s.formatTemplates,A.s.referral,A.s.password,A.s.subscription,A.s.promocodes,A.s.invoices,A.s.earnings]},children:[Object.assign({parentResult:!1,break:!0},Ue(!1)),{entry:_e,options:{key:ze.E9.emailVerifiedRender,transform:Boolean},children:[Object.assign({parentResult:!0,break:!0},Ue(!1)),Ue(!0)]}]},{entry:d}]};class Je extends i{resolve(){setTimeout(()=>{this.dispatch((0,Fe.uz)(!1))},this.time)}mapContext(){const e=new Date(Ae.Q.get(ze.E9.emailVerifiedDisabled));this.time=Number(e)-Date.now()}}const Le={entry:h,options:{key:["auth","currentUser","id"],transform:Boolean},children:[{parentResult:!0,entry:_e,options:{key:ze.E9.emailVerifiedDisabled,transform:Boolean},children:[{parentResult:!0,entry:j,options:{action:[(0,Fe.uz)(!0)]}},{parentResult:!0,entry:Je}]},{entry:d}]};var $e=o(33921);var Qe=o(99977);class Ve extends i{resolve(){this.dispatch((0,$e.MH)(this.email))}mapContext(e){var t;const o=null===(t=this.getCurrentChain(e))||void 0===t?void 0:t.ops.email;if(!o)throw new Error("email is empty");this.email=o}}var Ze=o(96466);const[,We,He]=m.qZ;const qe={entry:f,options:{key:"memberRemoved",transform:Boolean},children:[{parentResult:!1,break:!0,entry:Ve,children:[{entry:T,options:{memberRemoved:!0}},{entry:w,options:{actionTypes:[`${Qe.xb}_${We}`,`${Qe.xb}_${He}`]}}]},{entry:h,options:{key:["team","currentTeam","currentUserRole"]},children:[{parentResult:x.Kd.member,entry:j,options:{action:[(0,Ze.S)(),(0,$e.LK)()]}}]},{entry:d}]};var Xe=o(24687);class Ye extends i{resolve(){return this.hasActiveTeam}mapContext(e){this.hasActiveTeam=(0,Xe.sp)(e.getState().team.list)}}const[,et]=m.qZ;const tt={entry:f,options:{key:"createTeamModalWasOpen",transform:Boolean},children:[{parentResult:!1,break:!0,entry:j,options:{action:[(0,n.h7)({popup:a.n.createTeam})]},children:[{entry:T,options:{createTeamModalWasOpen:!0}},{entry:w,options:{actionTypes:[`${Qe.gb}_${et}`,n.Mr.type]}}]},{entry:Ye,children:[{parentResult:!0,entry:$,options:{pageName:A.s.team}}]},{entry:d}]};var ot=o(51042);class rt extends i{resolve(){if(this.sidebar===x.Gj.favorites)return void this.dispatch((0,r.t5)(x.zG.authorizationUser,{onSuccess(){this.dispatch((0,se.JW)({activeSidebarTab:x.Gj.favorites}))}}));let e={activeSidebarTab:this.sidebar||x.Gj.designs};this.sidebar===x.Gj.text&&this.tab===x.O$.fonts?e=Object.assign(Object.assign({},e),{activeTextsTab:this.tab}):this.sidebar===x.Gj.music&&this.tab===x.X4.explore?e=Object.assign(Object.assign({},e),{activeMusicTab:this.tab}):this.sidebar!==x.Gj.background||this.tab!==ze.KU.videos&&this.tab!==ze.KU.colors?this.sidebar===x.Gj.library&&this.tab===x.Pp.purchased?e=Object.assign(Object.assign({},e),{activeLibraryTab:this.tab}):this.sidebar===x.Gj.objects&&this.tab===ze.Q2.animated&&(e=Object.assign(Object.assign({},e),{activeObjectsTab:ze.Q2.animated})):e=Object.assign(Object.assign({},e),{activeBackgroundsTab:this.tab}),this.dispatch((0,se.JW)(e))}mapContext(e){const t=new URLSearchParams(null===M.m||void 0===M.m?void 0:M.m.location.search);const o=t.get("sidebar");const{projectData:{project:{group:r}},team:{currentTeam:n},partner:{partnerFrameConfig:{activeSidebarTab:i}},sidebar:{searchDesignParams:a}}=e.getState();switch(o){case x.Gj.music:case x.Gj.photos:case x.Gj.background:case x.Gj.text:case x.Gj.styles:case x.Gj.library:case x.Gj.video:case x.Gj.brandKit:case x.Gj.objects:this.sidebar=o}o!==x.Gj.favorites||(0,Xe.SE)(n)||(this.sidebar=o),r===ot.W8.Custom&&this.sidebar!==x.Gj.video&&(this.sidebar=x.Gj.photos),r===ot.W8.Custom&&a&&(this.sidebar=x.Gj.designs),t.get("uploadId")&&(this.sidebar=x.Gj.library),o!==x.Gj.objects||i||(this.sidebar=x.Gj.objects),i&&(this.sidebar=i),this.tab=String(t.get("tab")),(0,Xe.SE)(n)&&(this.tab="")}}const[,nt]=m.qZ;const it={entry:h,options:{key:["projectData","loadingProject"],transform:Boolean},children:[{parentResult:!0,break:!0,entry:w,options:{actionTypes:[`${v.tx}_${nt}`]}},{entry:rt},{entry:j,options:{action:[(0,r.t5)(x.zG.setActiveStyleGroup)]}},{entry:d}]};var at=o(7201);class st extends i{resolve(){this.dispatch((0,at.z)({projectId:this.projectId}))}mapContext(e){var t;const o=null===(t=this.getCurrentChain(e))||void 0===t?void 0:t.ops.projectId;if(null==o)throw new Error("projectId is empty");this.projectId=o}}class ct extends i{mapContext(e){const{exportProject:{exportedTemplateId:t}}=e.getState();if(null==t)throw new Error("Exported template id not found");this.exportedTemplateUrl=`/user/templates/${t}`}resolve(){return window.open(this.exportedTemplateUrl,"_blank")}}const dt={entry:f,options:{key:"projectExported",transform:Boolean},children:[{parentResult:!1,break:!0,entry:st,children:[{entry:T,options:{projectExported:!0}},{entry:w,options:{actionTypes:[at.z.async.done.type,at.z.async.failed.type]}}]},{entry:h,options:{key:["exportProject","error"],transform:Boolean},children:[{parentResult:!1,entry:j,options:{action:[(0,H.g)(x.JF.exportProjectSuccess)]}},{parentResult:!0,entry:j,options:{action:[(0,H.g)(x.JF.exportProjectError)]}},{entry:j,options:{action:[(0,n.Mr)()]}},{entry:ct}]},{entry:d}]};var lt=o(88710);var ut=o(16025);var pt=o(48234);const vt=[pt.DesignElementType.ImageElement,pt.DesignElementType.VideoElement,pt.DesignElementType.MaskElement];class mt extends i{resolve(){return this.shouldClose}mapContext(e){var t,o;const{arbiter:{selectedElement:r},sidebar:{actionsPanel:n}}=e.getState();const i=null===(o=null===(t=this.getCurrentChain(e))||void 0===t?void 0:t.ops.selectedElement)||void 0===o?void 0:o.type;n===ut.O.applyMask&&i&&vt.includes(i)?this.shouldClose=!1:this.shouldClose=!!n&&(null==r?void 0:r.type)!==i}}var ht=o(56371);class ft extends i{resolve(){this.dispatch((0,ht.cl)(this.selectedElement))}mapContext(e){var t;this.selectedElement=null===(t=this.getCurrentChain(e))||void 0===t?void 0:t.ops.selectedElement}}class yt extends i{resolve(){return this.isSelectedElementExist}mapContext(e){var t;this.isSelectedElementExist=!!(null===(t=this.getCurrentChain(e))||void 0===t?void 0:t.ops.selectedElement)}}var gt=o(32222);class bt extends i{resolve(){return this.shouldClose}mapContext(e){var t,o,r,n,i;const{arbiter:a,sidebar:{subActionsPanel:s}}=e.getState();const c=a.selectedElement;const d=null===(t=this.getCurrentChain(e))||void 0===t?void 0:t.ops.selectedElement;const l=d&&(null===(o=null==d?void 0:d.psParams)||void 0===o?void 0:o.processingType)===gt.p.removeBg;const u=c&&l&&d&&c.id===d.id;this.shouldClose=null!=s&&!u&&((null==c?void 0:c.uuid)!==(null==d?void 0:d.uuid)||!!(null===(r=null==c?void 0:c.animationProps)||void 0===r?void 0:r.type)!=!!(null===(n=null==d?void 0:d.animationProps)||void 0===n?void 0:n.type)||(null===(i=d.animationProps)||void 0===i?void 0:i.type)===pt.AnimationTypes.noEffect)}}var Pt=o(59312);var jt=o(62189);var Tt=o(61835);var wt=o(22559);const Gt={tooltipKey:Tt.B.removeBackgroundTip,options:{title:"tour_title_7",description:"tour_text_7",overridePosition:(e,t)=>{const{left:o,top:r,height:n}=(0,jt.au)(t);return{left:o,top:r+n+16}},pinClassName:wt.Z.topLeft,stepClassName:wt.Z.wideTip},cookieKey:ze.E9.removeBackgroundTourViewed,shouldShow:e=>{const{arbiter:{selectedElement:t},common:{currentPage:o},partner:{currentPartner:r}}=e.getState();return(null==t?void 0:t.type)===pt.DesignElementType.ImageElement&&!Ae.Q.get(Gt.cookieKey)&&A.s.artBoard===o&&!Boolean(r)}};const It=[Gt];class St extends i{resolve(){return(0,Pt.mG)(this,void 0,void 0,function*(){if(!this.tooltipToShow)return;const{cookieKey:e,tooltipKey:t,options:o}=this.tooltipToShow;this.dispatch((0,r.Oh)(this.chainName,{tooltipKey:t,tooltipOptions:o})),Ae.Q.set(e,"true")})}mapContext(e){this.tooltipToShow=It.find(({shouldShow:t})=>t(e))}}const Ct=[Tt.B.subHeaderFlip,Tt.B.subHeaderLayer,Tt.B.subHeaderAlign,Tt.B.subHeaderTransparency,Tt.B.subHeaderOutlines];const kt={entry:mt,children:[{entry:yt,children:[{parentResult:!1,entry:j,options:{action:[(0,lt.i8)(Ct)]}}]},{parentResult:!0,entry:j,options:{action:[(0,se.Y4)(null)]}},{entry:bt,children:[{parentResult:!0,entry:j,options:{action:[(0,se.BX)(null)]}}]},{entry:ft},{entry:ke,children:[{parentResult:!1,entry:St}]},{entry:d}]};var Et=o(28177);var xt=o(68841);class Ot extends i{resolve(){return this.shouldAd}mapContext(e){const{auth:{currentUser:t},dphItem:{item:o}}=e.getState();this.shouldAd=!!t.id&&(null==o?void 0:o.id)!==CONFIG.defaultPhotoForFromDepositModal}}var Ft=o(40943);class Rt extends i{resolve(){this.dispatch((0,Ft.R3)({favoriteMediaId:this.favoriteData,favoriteType:ze.Ld.photo,isFavorite:!0}))}mapContext(e){const{dphItem:{item:t}}=e.getState();if(null==t)throw new Error("dphItem is empty");this.favoriteData=t.dphId}}var At=o(27010);var zt=o(81976);class Mt extends i{resolve(){this.dispatch((0,At.j)({dphId:this.dphId,itemType:this.itemType,openModal:!0}))}mapContext(e){var t;const{dphId:o,itemType:r=zt.Y.imageElement}=(null===(t=this.getCurrentChain(e))||void 0===t?void 0:t.ops)||{};if(null==o)throw new Error("dphId is empty");this.dphId=o,this.itemType=r}}function Dt(e){return{entry:h,options:{key:["dphItem","item"],transform:Boolean},children:[Object.assign({parentResult:!0,break:!0},e),{entry:Mt,children:[{entry:w,options:{actionTypes:[At.j.async.done.type]}}]}]}}var Nt=o(28548);const Bt=Object.assign({},Dt({entry:h,options:{key:["vendorTemplates","items","length"],transform:Boolean},children:[{parentResult:!1,break:!0,entry:j,options:{action:[(0,Et.L)()]},children:[{entry:w,options:{actionTypes:[Et.L.async.done.type]}}]},{entry:j,options:{action:[(0,n.h7)({popup:a.n.fromDepositModal})]}},{entry:Ot,children:[{parentResult:!0,entry:Rt},{parentResult:!0,entry:j,options:{action:[(0,se.JW)({activeSidebarTab:x.Gj.favorites}),(0,xt.v7)(Nt.h.photo)]}}]},{entry:d}]}));var _t=o(90658);var Ut=o(6086);class Kt extends i{resolve(){const e=this.error instanceof Ut.hV?x.JF.removeBgUnknownForeground:x.JF.removeBgError;this.dispatch((0,H.g)(e))}mapContext(e){const{photoshop:{error:t}}=e.getState();this.error=t}}class Jt extends i{resolve(){return!this.backgroundRemoved}mapContext(e){var t;const{arbiter:{selectedElement:o}}=e.getState();this.backgroundRemoved=(null===(t=null==o?void 0:o.psParams)||void 0===t?void 0:t.processingType)===gt.p.removeBg}}class Lt extends i{resolve(){var e;null===(e=this.arbiter)||void 0===e||e.selectElements([this.currentElementUUID]),this.dispatch((0,_t.Sq)(Object.assign({elementUUID:this.currentElementUUID,elementMediaId:this.currentElementMediaId,processingType:gt.p.removeBg},this.currentElementDphId&&{originalDphId:Number(this.currentElementDphId)})))}mapContext(e){const t=this.getCurrentChain(e);const{mediaId:o,dphId:r,elementUuid:n,arbiter:i}=t.ops;const a=o||r;if(null==a||null==n)throw new Error(`lack of some properties in the chain:, ${t}`);this.currentElementDphId=r,this.currentElementUUID=n,this.currentElementMediaId=a,this.arbiter=i}}function $t(){return{entry:Jt,children:[{entry:d,parentResult:!1,break:!0,options:{success:!0}},{entry:f,options:{key:"backgroundRemoved",transform:Boolean},children:[{entry:h,parentResult:!0,break:!0,options:{key:["photoshop","error"],transform:Boolean},children:[{entry:Kt,parentResult:!0,break:!0,children:[{entry:d}]},{entry:d,options:{success:!0}}]},{entry:Lt},{entry:T,options:{backgroundRemoved:!0}},{entry:w,options:{actionTypes:[_t.Sq.async.done.type,_t.Sq.async.failed.type]}}]}]}}const Qt=Object.assign({},Z(Object.assign({},R(Object.assign({},$t())))));const[,Vt]=m.qZ;const Zt={entry:h,options:{key:["projectData","loadedProject"],transform:Boolean},children:[{parentResult:!1,break:!0,entry:w,options:{actionTypes:[`${v.tx}_${Vt}`]}},{entry:h,options:{key:["projectData","project","v2"],transform:Boolean},children:[{parentResult:!1,entry:j,options:{action:[(0,p.YB)()]}}]},{entry:d}]};var Wt=o(31575);class Ht extends i{resolve(){return this.shouldShow}mapContext(e){var t,o;this.shouldShow=null!==(o=null===(t=Wt.a[this.chainName])||void 0===t?void 0:t.shouldProcessCheck(e))&&void 0!==o&&o}}class qt extends i{runActions(e=[]){e.forEach(this.dispatch)}resolve(){if(!this.currentStep)return;const{tooltipKey:e,onShowActions:t,onCancelActions:o,onNextActions:n,options:i}=this.currentStep;Ae.Q.set(this.tour.cookieKey,String(this.tourStepIndex)),this.runActions(t),this.dispatch((0,r.Oh)(this.chainName,{tooltipKey:e,tooltipOptions:Object.assign(Object.assign({},i),{onNext:()=>{this.runActions(n)},onCancel:()=>{this.runActions(o)}})}))}mapContext(e){var t;const{tourStepIndex:o}=(null===(t=this.getCurrentChain(e))||void 0===t?void 0:t.ops)||{};const r=Wt.a[this.chainName];if(!r)return;this.tour=r,this.tourStepIndex=null!=o?o:0;const{steps:n}=this.tour;this.tourStepIndex<n.length&&(this.currentStep=n[this.tourStepIndex])}}const Xt="true";class Yt extends i{resolve(){void 0!==this.valueToSet&&Ae.Q.set(this.cookieKey,String(this.valueToSet)),void 0!==this.valueToSetInOps&&this.dispatch((0,r.Oh)(this.chainName,{tourStepIndex:this.valueToSetInOps}))}mapContext(e){var t;const{tourStepIndex:o}=(null===(t=this.getCurrentChain(e))||void 0===t?void 0:t.ops)||{};const r=Wt.a[this.chainName];if(!r)return;const{cookieKey:n,steps:i}=r;const a=Ae.Q.get(n);if(a===Xt)this.cookieKey=n,this.valueToSet=i.length-1;else if(void 0===o){const e=Number(a);this.valueToSetInOps=""===a||Number.isNaN(e)?0:e+1}}}function eo(e){return{entry:Yt,children:[{entry:Ht,children:[{parentResult:!1,entry:d,break:!0},{entry:qt},Object.assign({},e)]}]}}const[,to]=m.qZ;const oo=[Tt.B.artboardTourTip1,Tt.B.artboardTourTip2,Tt.B.artboardTourTip3,Tt.B.artboardTourTip4,Tt.B.artboardTourTip5,Tt.B.brandKitTourTip5,Tt.B.tutorialsTourTip,Tt.B.videoEditorTourTip1,Tt.B.videoEditorTourTip2,Tt.B.videoEditorTourTip3];const ro={entry:h,options:{key:["projectData","loadingProject"],transform:Boolean},children:[{parentResult:!0,break:!0,entry:w,options:{actionTypes:[`${v.tx}_${to}`]}},{entry:h,options:{key:["projectData","project","isLocked"],transform:Boolean},children:[{parentResult:!0,break:!0,entry:d},{entry:h,options:{key:["sidebar","isSidebarOpened"],transform:Boolean},children:[{parentResult:!1,entry:j,options:{action:[(0,lt.i8)(oo)]}}]},Object.assign({},eo({entry:w,options:{actionTypes:[m.XS,se.GB.type]}}))]}]};const no=Object.assign({},eo({entry:w,options:{actionTypes:[m.XS]}}));class io extends i{pickStyleGroup(e,[t,o]){const r=t.styleGroups.find(({styleGroup:{id:t}})=>t===e);if(r)return this.type=ye.g.animations,void(this.styleGroup=r.styleGroup);const n=o.styleGroups.find(({styleGroup:{id:t}})=>t===e);n&&(this.type=ye.g.objects,this.styleGroup=n.styleGroup)}resolve(){this.type&&this.styleGroup&&this.dispatch((0,le.j4)({type:this.type,styleGroup:this.styleGroup}))}mapContext(e){const t=new URLSearchParams(null===M.m||void 0===M.m?void 0:M.m.location.search).get("folder");const{styleGroupAnimations:o,styleGroupObjects:r}=e.getState();const n=String(t);this.pickStyleGroup(n,[o,r])}}const ao=[x.Gj.objects];class so extends i{resolve(){return this.shouldSet}mapContext(){const e=new URLSearchParams(null===M.m||void 0===M.m?void 0:M.m.location.search);const t=e.get("folder");const o=e.get("sidebar");this.shouldSet=!!t&&ao.includes(String(o))}}const[,co]=m.qZ;const lo="styleGroupsLoaded";const uo={entry:so,children:[{parentResult:!0,break:!0,entry:f,options:{key:lo,transform:Boolean},children:[{parentResult:!1,break:!0,entry:w,options:{actionTypes:[`${ge.g.animations}_${co}`,`${ge.g.object}_${co}`]},children:[{entry:T,options:{[lo]:!0}}]},{entry:io},{entry:d}]},{entry:d}]};var po=o(64564);const vo={[x.zG.artBoardTour]:ro,[x.zG.brandKitTourPart1]:no,[x.zG.brandKitTourPart2]:ro,[x.zG.openResizeProjectModal]:W,[x.zG.successPurchaseNotification]:X,[x.zG.showProfileHeaderNotification]:oe,[x.zG.onArtBoardUnmount]:we,[x.zG.authorizationUser]:Ee,[x.zG.showEmailVerifiedHeaderNotification]:Oe,[x.zG.resendEmailVerification]:Ne,[x.zG.checkEmailVerificationRender]:Ke,[x.zG.checkEmailVerificationDisabled]:Le,[x.zG.removeTeamMember]:qe,[x.zG.createTeam]:tt,[x.zG.setActiveSidebar]:it,[x.zG.exportProject]:dt,[x.zG.setSelectedElement]:kt,[x.zG.openFromDepositModal]:Bt,[x.zG.toggleImageBackground]:Qt,[x.zG.convertExistingProjectToV2]:Zt,[x.zG.setActiveStyleGroup]:uo};function mo(e,t,o){const r=new o.entry(e,t,o.options).resolve();o.children&&o.children.some(o=>("undefined"==typeof o.parentResult||o.parentResult===r)&&(mo(e,t,o),!!o.break))}function ho(e){let t=[];return()=>{const{chains:{chainList:o}}=e.getState();if(t===o)return;t=o;const n=[];const i=o.filter(e=>!e.ops[po.G.thunkChain]).reduce((e,t)=>{if(!vo[t.name])throw new Error(`Chain ${t.name} is not defined`);return t.ops.processAction&&(n.push(t.name),e.push(t)),e},[]);i.length&&(e.dispatch((0,r.zi)(n,{processAction:!1})),i.forEach(t=>{mo(t.name,e,vo[t.name])}))}}function fo(e){e.subscribe(ho(e))}},64564:function(e,t,o){var r;var n;o.d(t,{G:function(){return r},B:function(){return n}}),function(e){e["expectedActions"]="expectedActions",e["onError"]="onError",e["onSuccess"]="onSuccess",e["processAction"]="processAction",e["project"]="project",e["popup"]="popup",e["popupType"]="popupType",e["selectedPlan"]="selectedPlan",e["shouldCloseOnOverlayClick"]="shouldCloseOnOverlayClick",e["source"]="source",e["teamId"]="teamId",e["email"]="email",e["token"]="token",e["subscriptionPlansLoaded"]="subscriptionPlansLoaded",e["projectId"]="projectId",e["showNotification"]="showNotification",e["selectedElement"]="selectedElement",e["cardId"]="cardId",e["shouldGetProjectPreview"]="shouldGetProjectPreview",e["renameProject"]="renameProject",e["format"]="format",e["onlyCurrentPage"]="onlyCurrentPage",e["dphId"]="dphId",e["mediaId"]="mediaId",e["itemType"]="itemType",e["downloadProcessType"]="downloadProcessType",e["promoCode"]="promoCode",e["promoCodeActivated"]="promoCodeActivated",e["tourStepIndex"]="tourStepIndex",e["authPreviewPath"]="authPreviewPath",e["elementUuid"]="elementUuid",e["thunkChain"]="thunkChain",e["tooltipKey"]="tooltipKey",e["tooltipOptions"]="tooltipOptions",e["isUnlimitedPlus"]="isUnlimitedPlus",e["isTrialDisabled"]="isTrialDisabled",e["arbiter"]="arbiter"}(r||(r={})),function(e){e["brandKit"]="brandKit",e["createTeam"]="createTeam",e["multiResize"]="multiResize",e["outline"]="outline",e["storage"]="storage",e["versions"]="versions",e["backgroundRemoval"]="backgroundRemoval",e["downloadAs"]="downloadAs",e["unlimitedPlus"]="unlimitedPlus",e["premiumTemplate"]="premiumTemplate",e["resizeTemplate"]="resizeTemplate",e["subscriptionModalArtboard"]="subscriptionModalArtboard",e["subscriptionModalArtboardTabs"]="subscriptionModalArtboardTabs",e["subscriptionModalArtboardSteps"]="subscriptionModalArtboardSteps",e["subscriptionModalOnboarding"]="subscriptionModalOnboarding"}(n||(n={}))},38763:function(e,t,o){o.d(t,{E$:function(){return a},xv:function(){return s},Ql:function(){return c},iP:function(){return d},p5:function(){return l}});var r=o(48814);function n(e,t){return Object.assign(Object.assign({},e),{ops:Object.assign(Object.assign({},e.ops),t)})}const i={chainList:[]};const a="chains/START_CHAIN";const s="chains/UPDATE_CHAIN";const c="chains/MULTI_UPDATE_CHAINS";const d="chains/STOP_CHAIN";const l=(e=i,t)=>{const{type:o,meta:l={}}=t;const{name:u,ops:p={}}=l;let{chainList:v}=e;switch(o){case a:v=e.chainList.concat([{name:u,ops:p}]);break;case s:v=e.chainList.map(e=>e.name!==u?e:n(e,p));break;case d:v=e.chainList.filter(e=>e.name!==u);break;case c:v=e.chainList.map(e=>l.names.includes(e.name)?n(e,p):e);break;default:v=e.chainList}return v=v.reduce((t,i,a)=>{var s;return(null===(s=i.ops.expectedActions)||void 0===s?void 0:s.includes(o))&&((t=t===e.chainList?Array.from(e.chainList):t)[a]=n(i,(0,r.x)())),t},v),v!==e.chainList?Object.assign(Object.assign({},e),{chainList:v}):e}},14439:function(e,t,o){o.d(t,{f:function(){return p}});var r=o(59312);var n=o(61235);var i=o(51023);var a=o(75551);var s=o(20347);var c=o(4715);var d=o(80249);var l=o(6573);const u=()=>new Promise(e=>{const t=o=>{var r;[d.co.payment,d.co.card].includes(null===(r=o.data)||void 0===r?void 0:r.type)&&(window.removeEventListener(l.wB.message,t),e(o.data))};window.addEventListener(l.wB.message,t)});const p=()=>(e,t,o)=>(0,r.mG)(void 0,void 0,void 0,function*(){var r;const l=yield Promise.race([u(),s.V.waitFor([n.Mr.type])]);const p=undefined;if((null==l?void 0:l.type)===d.co.card&&!(null==l?void 0:l.isExternalError)){const{auth:{currentUser:{integerId:e}},subscriptionPlans:{list:n}}=t();yield o.post("/api/postprocessCard",{integerId:e,currency:null===(r=n[0])||void 0===r?void 0:r.currency})}if(e((0,i.JK)()),e((0,a.JK)()),!l)throw(0,c.n)("stepCombination: processingThreeDs was interrupted");if(null==l?void 0:l.isExternalError)throw e((0,n.$g)({isExternalError:l.isExternalError})),(0,c.n)("stepCombination: processingThreeDs was interrupted")})},98572:function(e,t,o){o.d(t,{U:function(){return a}});var r=o(59312);var n=o(56564);var i=o(4423);const a=e=>t=>(0,r.mG)(void 0,void 0,void 0,function*(){yield t((0,n.y)({source:e})),yield t((0,i.P)())})},56564:function(e,t,o){o.d(t,{A:function(){return x},y:function(){return O}});var r=o(59312);var n=o(61235);var i=o(55375);var a=o(64196);var s=o(33921);var c=o(20005);var d=o(29539);var l=o(26951);var u=o(1302);var p=o(23772);var v=o(11942);var m=o(40430);var h=o(3681);var f=o(20347);var y=o(20638);var g=o(97754);var b=o(59556);var P=o(4715);var j=o(14385);var T=o(6573);var w=o(59725);var G=o(66970);var I=o(4717);var S=o(22933);const[,C]=h.qZ;const k=[G.s.brandKit,G.s.artBoard];const E=()=>(e,t)=>(0,r.mG)(void 0,void 0,void 0,function*(){if(yield f.V.waitFor([h.XS]),G.C.includes(t().common.currentPage))return e(E())});const x=()=>(e,t)=>(0,r.mG)(void 0,void 0,void 0,function*(){const{modal:{popup:o},common:{currentPage:r,language:h},auth:{currentUser:f},partner:{currentPartner:y}}=t();const{id:g,language:b}=f;if(!g)throw(0,P.n)("stepCombination: tryAuthorizeUser was interrupted");const w=[(0,a.pI)(),(0,d.w)(),(0,s.LK)(),(0,S.J)(),(0,i.t5)(T.zG.checkEmailVerificationRender),(0,c.M)(),(0,l.SP)(),(0,m.iu)()];o&&w.push((0,n.Mr)()),(0,j.xy)(f,y)&&w.push((0,v.HY)()),k.includes(r)&&w.push((0,u.p0)()),h!==b&&w.push((0,p.X1)(b)),w.forEach(e)});const O=(e={})=>(t,o)=>(0,r.mG)(void 0,void 0,void 0,function*(){const{auth:{currentUser:{id:i}},common:{language:a,currentPage:s,userAgent:{isMobile:c}}}=o();if(i)return;if(G.C.includes(s))return yield Promise.race([t(E()),f.V.waitFor([`${w.w8}_${C}`])]),yield t(x()),void(null===g.m||void 0===g.m||g.m.replace((0,b.Uv)(o().auth.currentUser.language,null===g.m||void 0===g.m?void 0:g.m.location.search)));if(c)return null===g.m||void 0===g.m||g.m.push((0,y.B8)(null===g.m||void 0===g.m?void 0:g.m.location.pathname,a)),yield f.V.waitFor([h.XS]),t(O(e));const{popup:d=I.n.registration,shouldCloseOnOverlayClick:l=!0}=e,u=(0,r._T)(e,["popup","shouldCloseOnOverlayClick"]);t((0,n.h7)({popup:d,options:Object.assign({shouldCloseOnOverlayClick:l},u)})),yield f.V.waitFor([n.Mr.type,`${w.w8}_${C}`]),yield t(x())})},46387:function(e,t,o){o.d(t,{a:function(){return b}});var r=o(59312);var n=o(61235);var i=o(29539);var a=o(3681);var s=o(20347);var c=o(21356);var d=o(4715);var l=o(24316);var u=o(66970);var p=o(64564);const v=[p.B.premiumTemplate,p.B.subscriptionModalArtboard,p.B.subscriptionModalArtboardTabs,p.B.subscriptionModalArtboardSteps];var m=o(18376);var h=o(58632);const f=({popupType:e},t)=>{t===u.s.artBoard&&e&&v.includes(e)&&!l.Q.get(m.E9.isSubscriptionModalShown)&&l.Q.set(m.E9.isSubscriptionModalShown,"true",{expiresIn:h.Ix}),e===p.B.subscriptionModalArtboardSteps&&l.Q.set(m.E9.isNewSubscriptionStepsModalShown,"true")};var y=o(49659);var g=o(4717);const b=(e={})=>(t,o)=>(0,r.mG)(void 0,void 0,void 0,function*(){if(yield t((0,y.w)()),!(0,c.BZ)(o().auth.subscription)&&(f(e,o().common.currentPage),t((0,i.w)()),t((0,n.h7)({popup:g.n.subscriptionModal,options:e})),yield s.V.waitFor([n.Mr.type,a.XS]),!(0,c.BZ)(o().auth.subscription)))throw(0,d.n)("stepCombination: tryPurchaseSubscription was interrupted")})},32707:function(e,t,o){o.d(t,{Y:function(){return d}});var r=o(59312);var n=o(61235);var i=o(19258);var a=o(20347);var s=o(4715);var c=o(4717);const d=(e,t)=>(o,d)=>(0,r.mG)(void 0,void 0,void 0,function*(){if(yield o((0,i.hp)({project:e})),d().unpaidItems.unpaidItems.length&&(yield o((0,n.h7)({popup:c.n.invoiceModal,options:{project:e,downloadProcessType:t}})),yield a.V.waitFor([n.Mr.type,i.I3.async.done.type]),d().unpaidItems.unpaidItems.length))throw(0,s.n)("stepCombination: tryPurchaseUnpaidItems was interrupted")})},40877:function(e,t,o){o.d(t,{e:function(){return d}});var r=o(59312);var n=o(55375);var i=o(24316);var a=o(4715);const s="true";const c=({cookieKey:e,tourSteps:t,isCompleted:o})=>()=>(0,r.mG)(void 0,void 0,void 0,function*(){const r=i.Q.get(e);if(r===s||o)return void i.Q.set(e,String(t.length-1));const n=Number(r);r&&!Number.isNaN(n)?i.Q.set(e,String(Math.min(n+1,t.length-1))):i.Q.set(e,"0")});const d=({chainName:e,tour:t})=>(o,s)=>(0,r.mG)(void 0,void 0,void 0,function*(){const{cookieKey:r,steps:l,shouldShowTour:u}=t;if(!u(s()))return;yield o(c({cookieKey:r,tourSteps:l}));const p=Number(i.Q.get(r));const v=l[p];if(!v)return;const m=(e=[])=>{e.forEach(o)};const{tooltipKey:h,onShowActions:f,onCancelActions:y,onNextActions:g,options:b}=v;return m(f),yield new Promise((t,i)=>{o((0,n.Oh)(e,{tooltipKey:h,tooltipOptions:Object.assign(Object.assign({},b),{onNext:()=>{m(g),t()},onCancel:()=>{m(y),o(c({cookieKey:r,tourSteps:l,isCompleted:!0})),i((0,a.n)("stepCombination: tryShowTourStep was interrupted"))}})}))}),o(d({chainName:e,tour:t}))})},49659:function(e,t,o){o.d(t,{w:function(){return d}});var r=o(59312);var n=o(64196);var i=o(20347);var a=o(3681);var s=o(59725);const[,c]=a.qZ;const d=()=>(e,t)=>(0,r.mG)(void 0,void 0,void 0,function*(){const{auth:{subscriptionLoaded:o,subscriptionLoading:r}}=t();o||(r||e((0,n.pI)()),yield i.V.waitFor([`${s.$T}_${c}`]))})},4423:function(e,t,o){o.d(t,{P:function(){return h}});var r=o(59312);var n=o(2636);var i=o(50692);var a=o(20347);var s=o(19807);var c=o(3681);var d=o(55595);var l=o(4715);var u=o(14385);var p=o(6573);const[,v,m]=c.qZ;const h=({nextPageName:e}={})=>(t,o)=>(0,r.mG)(void 0,void 0,void 0,function*(){if(o().arbiter.isReady||(yield a.V.waitFor([s.Nu])),o().projectData.loading){if(yield a.V.waitFor([`${s.yn}_${v}`,`${s.yn}_${m}`]),o().projectData.error)throw(0,l.n)("stepCombination: trySyncProject was interrupted")}else{if((0,u.Qr)(o().projectData.project))throw(0,l.n)("stepCombination: trySyncProject was interrupted");try{yield t((0,i.W3)(!0))}catch(r){const{projectData:{error:i},artboard:{editingMode:a}}=o();const s=undefined;throw a===d.a.partnerTemplate&&(null==i?void 0:i.status)===p.jh.badRequest&&t((0,n.g)(p.JF.syncPartnerTemplateError,{nextPageName:e})),r}}})},51717:function(e,t,o){o.d(t,{p:function(){return c}});var r=o(59312);var n=o(893);var i=o(86750);var a=o(61235);var s=o(4717);const c=(e,t)=>(o,c,d)=>(0,r.mG)(void 0,void 0,void 0,function*(){const r=[...new Set(e)];const c=undefined;const l=(yield Promise.allSettled(r.map(e=>d.post(n.py,{url:e,elementType:t})))).reduce((e,t,o)=>{const n=undefined;return e[r[o]]="fulfilled"===t.status?(0,i.WJ)([t.value])[0]:null,e},{});return Object.values(l).some(e=>null===e)&&o((0,a.h7)({popup:s.n.uploadError})),l})},70092:function(e,t,o){o.d(t,{y:function(){return a}});var r=o(59312);var n=o(26951);var i=o(20347);const a=()=>(e,t)=>(0,r.mG)(void 0,void 0,void 0,function*(){const{loaded:o,loading:r}=t().userMetadata;o||(r||e((0,n.SP)()),yield i.V.waitFor([n.SP.async.done.type]))})},24434:function(e,t,o){o.d(t,{Ux:function(){return a},jm:function(){return s},GM:function(){return c}});var r=o(18376);var n=o(12877);var i=o(6573);const a=({activeSidebarTab:e,activeBackgroundsTab:t,activeMusicTab:o,activeObjectsTab:a,activeDesignsTab:s})=>{switch(e){case i.Gj.designs:return s===i.KJ.crello?n.a.template:void 0;case i.Gj.photos:return n.a.photo;case i.Gj.video:return n.a.video;case i.Gj.background:return t===r.KU.photos?n.a.backgroundsPhoto:n.a.backgroundsVideo;case i.Gj.objects:return a===r.Q2.static?n.a.objectStatic:n.a.objectAnimated;case i.Gj.music:return o===i.X4.explore?n.a.music:void 0;default:return}};const s=e=>{const{sidebar:{activeSidebarTab:t,activeBackgroundsTab:o,activeObjectsTab:n},recentUsed:a,stockVideos:{meta:{searchQuery:s}},premiumPhotos:{meta:{searchQuery:c}},designs:{selectedDesign:d}}=e;switch(t){case i.Gj.background:return o===r.KU.photos&&!a.backgroundsPhoto.isOpened||o===r.KU.videos&&!a.backgroundsVideo.isOpened;case i.Gj.photos:return!a.photo.isOpened||!!c;case i.Gj.video:return!a.video.isOpened||!!s;case i.Gj.objects:return n===r.Q2.static&&!a.objectStatic.isOpened||n===r.Q2.animated&&!a.objectAnimated.isOpened;case i.Gj.music:return!a.music.isOpened;case i.Gj.designs:return!!d||!a.template.isOpened;default:return!1}};const c=e=>{const t=Object.assign({},e);return"isSimilarsCollection"in t&&delete t.isSimilarsCollection,e.type===i.Yj.videoElement&&(delete t.duration,delete t.loop),t}},17103:function(e,t,o){o.d(t,{y:function(){return a}});var r=o(59312);var n=o(61235);var i=o(20347);const a=()=>(e,t)=>(0,r.mG)(void 0,void 0,void 0,function*(){t().modal.popup&&(yield i.V.waitFor([n.Mr.type]))})},22483:function(e,t,o){o.d(t,{O:function(){return a}});var r=o(59312);var n=o(20347);var i=o(38763);const a=(e=[])=>(t,o)=>(0,r.mG)(void 0,void 0,void 0,function*(){const t=()=>o().chains.chainList.filter(({name:t})=>!e.includes(t));for(;t().length>1;)yield n.V.waitFor([i.iP])})},89929:function(e,t,o){o.d(t,{z:function(){return c}});var r=o(59312);var n=o(55375);var i=o(27010);var a=o(24310);var s=o(6573);const c=(0,n.aP)(s.zG.addDphItemToArtBoard,({dphId:e,itemType:t,arbiter:o})=>(n,s)=>(0,r.mG)(void 0,void 0,void 0,function*(){yield n((0,i.j)({dphId:e,itemType:t}));const{item:r}=s().dphItem;r&&o.addElementWithScale((0,a.cC)(r),{shouldAsyncHandle:!0})}))},19444:function(e,t,o){o.d(t,{a:function(){return l}});var r=o(59312);var n=o(2636);var i=o(61235);var a=o(37620);var s=o(58853);var c=o(55375);var d=o(6573);const l=(0,c.aP)(d.zG.addProjectsToTemplates,({projectIds:e=[],shouldCloneProjects:t=!1,shouldResetSelected:o})=>(c,l)=>(0,r.mG)(void 0,void 0,void 0,function*(){c((0,i.Mr)()),yield c((0,a.nY)({projectIds:e})),o&&c((0,s.NQ)());const{partnerTemplates:{failedProjectIds:r,error:u}}=l();if(!t){if(u)return;const t=e.filter(e=>!r.includes(e));t.length&&c((0,s.Kr)(t))}const p=undefined;const v={projectIds:e,failedProjectIds:u?e:r,shouldCloneProjects:t,isError:!!u};r.length?c((0,n.g)(d.JF.syncPartnerTemplateError)):c(u?(0,n.g)(d.JF.addProjectsToTemplatesError,v):(0,n.g)(d.JF.addProjectsToTemplatesSuccess,v))}))},21014:function(e,t,o){o.d(t,{F:function(){return s}});var r=o(59312);var n=o(55375);var i=o(10021);var a=o(6573);const s=(0,n.aP)(a.zG.appsFlyerGenerator,()=>()=>(0,r.mG)(void 0,void 0,void 0,function*(){return(0,i.R)({src:`${CONFIG.mediaServer}/common/appsflyer-link-generator.min.js`})}))},27537:function(e,t,o){o.d(t,{$:function(){return j}});var r=o(59312);var n=o(55375);var i=o(3681);var a=o(18665);var s=o(14385);var c=o(21379);var d=o(26539);var l=o(75513);var u=o(59444);var p=o(6573);var v=o(59725);var m=o(18376);const h={[m.TN.crelloButtonPartner]:"/api/oauth/crelloButtonPartner/callback",[m.TN.cimpress]:"/api/oauth/cimpress/callback"};var f=o(32218);var y=o(35017);const[g,b,P]=i.qZ;const j=(0,n.aP)(p.zG.authByProvider,e=>(t,o,n)=>(0,r.mG)(void 0,void 0,void 0,function*(){t({type:`${v.w8}_${g}`});const r=Object.assign(Object.assign({},e),{termsConfirmed:!0});r.mailSubscription||(r.mailSubscription=!(0,a.gz)(o().auth.currentUser));try{const i=yield n.post(h[e.provider],r);if(i.accountCreated){const e=yield(0,c.y)(i.user.email);(0,d.J)({event:l.GM.registration,type:l.GM.vistaform,email:e,userId:i.user.id,singleId:i.user.vistaId}),u.rd.track(y.u.registration)}(0,d.J)(Object.assign({event:l.GM.userAdditionData,userId:i.user.id},i.user.features)),i.accountCreated&&!(0,s.Ye)(o().partner.currentPartner)?t({type:`${v.w8}_${P}`,payload:{context:{authResponse:i},caption:(0,a.gz)(i.user)&&!i.user.mailSubscription?f.v.userMailSubscriptionConsent:f.v.userProfilingRequired}}):t({type:`${v.w8}_${b}`,payload:i})}catch(e){t({type:`${v.w8}_${P}`,payload:e,meta:r})}}))},4756:function(e,t,o){o.d(t,{X:function(){return f}});var r=o(59312);var n=o(39014);var i=o(55375);var a=o(86047);var s=o(48216);var c=o(47180);var d=o(89832);var l=o(10606);var u=o(70874);var p=o(79871);var v=o(6573);var m=o(98572);var h=o(87134);const f=(0,i.aP)(v.zG.automaticExport,({format:e,eventId:t})=>(o,i)=>(0,r.mG)(void 0,void 0,void 0,function*(){const f=()=>(0,r.mG)(void 0,void 0,void 0,function*(){yield o((0,m.U)(v._J.download));const{partner:{features:t,partnerFrameConfig:{bleedTrim:r,exportQuality:a}},projectData:{project:f},auth:{subscription:y}}=i();if(!(0,u.X)(f))throw new Error(h.yp);const g=(0,c.V)(f,t).find(t=>t.partnerDownloadFormat===e);if(!g)throw new Error("Download format is not allowed for your account");if((0,l.E)(n.Wz.lowResHiResDownload,t,!1))throw new Error("lowResHiResDownload feature is not allowed for AutomaticExport");const{format:b,ops:P}=g;const j=(0,d.oM)({project:f,subscription:y,downloadType:g,partnerExportQuality:a});yield o((0,p.s)({project:f,format:b,ops:Object.assign({downloadProcessType:v.$I.partnerAutomaticExport,customBleed:r,scaleRatio:j.scale},P)}));const{downloads:{download:T}}=i();if(!(0,s.J)(T))throw new Error("Download failed");const{downloadId:w,path:G,originalName:I,extension:S,height:C,width:k,projectId:E,measureUnits:x,format:O}=T;return{id:E,downloadId:w,url:CONFIG.url+G,format:O,extension:S,projectName:I,width:k,height:C,measureUnits:x}});const{partner:{features:y,frameId:g}}=i();(0,a.eb)({completedEventType:n.kR.exportDesignCompleted,failedEventType:n.kR.exportDesignFailed,featureName:n.Wz.automaticExport,eventId:t,callback:f,partnerFeatures:y,partnerFrameId:g})}))},83039:function(e,t,o){o.d(t,{E:function(){return p}});var r=o(59312);var n=o(64196);var i=o(75551);var a=o(55375);var s=o(14385);var c=o(6573);var d=o(18376);var l=o(20576);const u="/api/feedback";const p=(0,a.aP)(c.zG.cancelSubscription,e=>{var t=e.feedback,{other:o}=t,a=(0,r._T)(t,["other"]),{shouldRemoveCard:c}=e;return(e,t,p)=>(0,r.mG)(void 0,void 0,void 0,function*(){const{paymentCard:{card:r},auth:{subscription:v}}=t();if(p.post(u,{type:d.nY.subscriptionCancel,fields:Object.assign(Object.assign({},a),{other:(0,s.s2)(o)}),subscriptionId:v.id,cancellationWay:c?l.xU.deleteCardButton:l.xU.cancelSubscriptionButton}),c&&r)return e((0,i.yJ)(r));e((0,n.dh)())})})},61742:function(e,t,o){o.d(t,{N:function(){return d}});var r=o(59312);var n=o(16919);var i=o(55375);var a=o(12931);var s=o(1994);var c=o(6573);const d=(0,i.aP)(c.zG.changeObjectTab,({tab:e,searchQuery:t})=>(o,i)=>(0,r.mG)(void 0,void 0,void 0,function*(){const{contentType:r}=n.u[e];const{meta:{searchQuery:d}}=i()[r];o((0,s.JW)({activeSidebarTab:c.Gj.objects,activeObjectsTab:e})),d!==t&&(t||!d?t&&d!==t&&o((0,a.F)({searchQuery:t,skip:0},r)):o((0,a.x)(r)))}))},33437:function(e,t,o){o.d(t,{S:function(){return c}});var r=o(59312);var n=o(50692);var i=o(55375);var a=o(13596);var s=o(6573);const c=(0,i.aP)(s.zG.changeProjectName,({name:e,arbiter:t})=>(o,i)=>(0,r.mG)(void 0,void 0,void 0,function*(){const{projectData:{project:{name:r}}}=i();const s=e.trim();s&&s!==r&&(null==t||t.updateProject({name:s}),yield o((0,n.UI)({name:s})),yield o((0,a.P)()))}))},96466:function(e,t,o){o.d(t,{S:function(){return f}});var r=o(59312);var n=o(55375);var i=o(33921);var a=o(64196);var s=o(24316);var c=o(97754);var d=o(59556);var l=o(66970);const u=({currentPage:e,currentTeam:t,language:o})=>{switch(e){case l.s.account:case l.s.password:case l.s.subscription:case l.s.invoices:case l.s.promocodes:case l.s.referral:case l.s.earnings:case l.s.subscriptionCenter:case l.s.team:return(0,d.ro)({currentTeam:t,language:o});case l.s.myProjects:return(0,d.jq)({currentTeam:t,language:o});default:return(0,d.cd)({currentTeam:t,language:o})}};var p=o(6573);var v=o(18376);var m=o(46387);var h=o(64564);const f=(0,n.aP)(p.zG.changeTeam,({teamId:e="",skipRedirect:t}={})=>(o,n)=>(0,r.mG)(void 0,void 0,void 0,function*(){const{common:{currentPage:r,language:d},team:{currentTeam:{id:l=""},list:p}}=n();if(l===e)return;const f=p.find(({id:t})=>t===e);if(f&&!f.isActive&&(yield o((0,m.a)({popupType:h.B.createTeam}))),s.Q.set(v.E9.teamId,e),o((0,i.Vk)(e)),o((0,a.pI)(!0)),t)return;const{currentTeam:y}=n().team;const g=u({currentPage:r,currentTeam:y,language:d});null===c.m||void 0===c.m||c.m.replace(g)}))},87944:function(e,t,o){o.d(t,{Q:function(){return u}});var r=o(59312);var n=o(55375);const i=e=>e.reduce((e,{size:t})=>e+t,0);var a=o(6573);var s=o(56564);var c=o(46387);var d=o(70092);var l=o(64564);const u=(0,n.aP)(a.zG.checkUserSubscriptionBeforeUploading,({files:e})=>(t,o)=>(0,r.mG)(void 0,void 0,void 0,function*(){yield t((0,s.y)()),yield t((0,d.y)());const{userMetadata:{diskUsageInfo:{softLimit:r,used:n}}}=o();n+i(e)>=r&&(yield t((0,c.a)({popupType:l.B.storage})))}))},76412:function(e,t,o){o.d(t,{Q:function(){return l}});var r=o(59312);var n=o(73500);var i=o(61235);var a=o(55375);var s=o(6573);var c=o(87134);var d=o(4717);const l=(0,a.aP)(s.zG.tryToCopyToClipboard,({arbiter:e,element:t})=>o=>(0,r.mG)(void 0,void 0,void 0,function*(){if(!navigator.clipboard)return void o((0,i.h7)({popup:d.n.copyPasteClipboard}));if(!e||!(0,n.LG)(t))return;const r={type:c.lI,element:t};navigator.clipboard.writeText(JSON.stringify(r))}))},95996:function(e,t,o){o.d(t,{V:function(){return l}});var r=o(59312);var n=o(61235);var i=o(55375);var a=o(51206);var s=o(6573);var c=o(87134);var d=o(4717);const l=(0,i.aP)(s.zG.tryToPasteFromClipboard,e=>(t,o)=>(0,r.mG)(void 0,void 0,void 0,function*(){if(navigator.clipboard){if(e)try{const t=yield navigator.clipboard.readText();if(!t)return;if(t.includes(c.lI)){const{element:o}=JSON.parse(t);return void e.pasteFromClipboard(o)}const{common:{language:r},projectData:{project:{pageWidth:n=0}}}=o();const i=(0,a.yE)({language:r,pageWidth:n,textData:t});e.addElement(i)}catch(e){t((0,n.h7)({popup:d.n.copyPasteClipboard}))}}else t((0,n.h7)({popup:d.n.copyPasteClipboard}))}))},60449:function(e,t,o){o.d(t,{L:function(){return l}});var r=o(59312);var n=o(2636);var i=o(61235);var a=o(79006);var s=o(58853);var c=o(55375);var d=o(6573);const l=(0,c.aP)(d.zG.cloneProjectsToTeam,({projectIds:e,deleteFromPersonalSpace:t,shouldResetSelected:o})=>(c,l)=>(0,r.mG)(void 0,void 0,void 0,function*(){c((0,i.Mr)()),yield c((0,a.I)({projectIds:e,deleteFromPersonalSpace:t})),o&&c((0,s.NQ)());const{cloneProjectsToTeam:{failedProjectIds:r,error:u}}=l();if(t){if(u)throw u;const t=e.filter(e=>!r.includes(e));t.length&&c((0,s.Kr)(t))}const p=undefined;const v={projectIds:e,failedProjectIds:u?e:r,deleteFromPersonalSpace:t,isError:!!u};u||r.length?c((0,n.g)(d.JF.cloneProjectsToTeamError,v)):c((0,n.g)(d.JF.cloneProjectsToTeamSuccess,v))}))},92392:function(e,t,o){o.d(t,{p:function(){return s}});var r=o(59312);var n=o(55375);var i=o(30875);var a=o(6573);const s=(0,n.aP)(a.zG.connectSocialAccount,e=>(t,o)=>(0,r.mG)(void 0,void 0,void 0,function*(){const{oauthUrl:r}=o().socialAccountConnect;if(!r)return;yield t((0,i._4)(r));const{accountId:n}=o().socialAccountConnect;n&&t((0,i.Bq)(e))}))},73582:function(e,t,o){o.d(t,{a:function(){return d}});var r=o(59312);var n=o(2636);var i=o(55375);var a=o(89992);var s=o(4715);var c=o(6573);const d=(0,i.aP)(c.zG.createContentFolder,({name:e})=>t=>(0,r.mG)(void 0,void 0,void 0,function*(){try{yield t((0,a.JK)({name:e})),t((0,n.g)(c.JF.contentFolderCreated))}catch(e){throw t((0,n.g)(c.JF.contentFolderCreateFailed)),(0,s.n)("chain: createContentFolder was interrupted")}}))},34428:function(e,t,o){o.d(t,{D:function(){return v}});var r=o(59312);var n=o(55375);var i=o(79006);var a=o(24687);var s=o(59556);var c=o(23932);var d=o(97754);var l=o(6573);var u=o(96466);var p=o(83127);const v=(0,n.aP)(l.zG.handleAddToTeam,({projectId:e,deleteFromPersonalSpace:t})=>(o,n)=>(0,r.mG)(void 0,void 0,void 0,function*(){yield o((0,i.I)({projectIds:[e],deleteFromPersonalSpace:t}));const{cloneProjectsToTeam:{error:r,result:l},team:{list:v}}=n();const[m]=l;const h=(0,a.v5)(v);if(r||!(null==m?void 0:m.isSuccessful)||!h)throw new Error("Project was not cloned.");o((0,u.S)({teamId:h.id,skipRedirect:!0}));const{common:{language:f},team:{currentTeam:y}}=n();c.q.setItem(p.c.addedToTeamSnackbarText,t?"editor_moved_to_team_notification":"editor_copied_notification"),null===d.m||void 0===d.m||d.m.push((0,s.jq)({currentTeam:y,language:f,projectId:m.newProjectId}))}))},71640:function(e,t,o){o.d(t,{K:function(){return l}});var r=o(59312);var n=o(61235);var i=o(55375);var a=o(21356);var s=o(4715);var c=o(6573);var d=o(46387);const l=(0,i.aP)(c.zG.openProFlow,({selectedServiceKey:e,popupType:t,onSubscriptionPurchase:o})=>(i,c)=>(0,r.mG)(void 0,void 0,void 0,function*(){const{auth:{subscription:r},modal:{popup:l,options:u}}=c();if(!l)throw(0,s.n)("chain: openProFlow was interrupted");try{(0,a.BZ)(r)||(yield i((0,d.a)({popupType:t})),null==o||o())}catch(e){throw(0,s.n)("chain: openProFlow was interrupted")}finally{i((0,n.h7)({popup:l,options:Object.assign(Object.assign({},u),{reopened:!0})}))}i((0,n.$g)({selectedServiceKey:e}))}))},14153:function(e,t,o){o.d(t,{y:function(){return f}});var r=o(59312);var n=o(61235);var i=o(55375);var a=o(6573);var s=o(50692);var c=o(20347);var d=o(19807);var l=o(3681);var u=o(4715);var p=o(4717);const[v,m]=l.qZ;const h=(0,i.aP)(a.zG.tryGenerateProjectPreview,e=>(t,o)=>(0,r.mG)(void 0,void 0,void 0,function*(){if(o().projectData.loading&&(yield c.V.waitFor([`${d.ZQ}_${m}`,`${d.ZQ}_${v}`])),o().projectData.error)throw(0,u.n)("chain: tryGenerateProjectPreview was interrupted");yield t((0,s.En)(e.id));const{popup:r}=o().modal;if(!r||r!==p.n.exportDesign)throw(0,u.n)("chain: tryGenerateProjectPreview was interrupted")}));const f=(0,i.aP)(a.zG.openServiceWithPreview,e=>(t,o)=>(0,r.mG)(void 0,void 0,void 0,function*(){t((0,n.$g)({selectedServiceKey:e}));const{isPreviewGenerated:r,project:i}=o().modal.options;r||t(h(i))}))},72036:function(e,t,o){o.d(t,{e:function(){return f}});var r=o(59312);var n=o(61235);var i=o(55375);var a=o(49554);var s=o(70874);var c=o(4715);var d=o(26539);var l=o(89832);var u=o(6573);var p=o(90506);var v=o(98572);var m=o(4717);var h=o(66970);const f=(0,i.aP)(u.zG.tryOpenExportModal,({downloadProcessType:e,project:t,selectedServiceKey:o,isExportShortcut:i})=>(f,y)=>(0,r.mG)(void 0,void 0,void 0,function*(){t||(yield f((0,v.U)(u._J.share)));const g=t||y().projectData.project;if(!(0,s.X)(g))throw(0,c.n)("chain: tryOpenExportModal was interrupted");const{currentPage:b}=y().common;b===h.s.myProjects&&(yield Promise.all([f((0,a.y)(g)),f((0,a.J)(g))]));const{partner:{partnerFrameConfig:{exportQuality:P}},auth:{subscription:j}}=y();f((0,n.h7)({popup:m.n.exportDesign,options:{project:g,downloadProcessType:e,onEscOrOverlayClick:()=>(0,r.mG)(void 0,void 0,void 0,function*(){(0,d.J)(p.yw)}),selectedServiceKey:o,isExportShortcut:i,scale:(0,l.oM)({project:g,subscription:j,partnerExportQuality:P})}}))}))},9531:function(e,t,o){o.d(t,{y:function(){return l}});var r=o(59312);var n=o(64196);var i=o(55375);var a=o(45507);var s=o(6573);var c=o(14153);var d=o(11162);const l=(0,i.aP)(s.zG.tryOpenFacebookAds,()=>(e,t)=>(0,r.mG)(void 0,void 0,void 0,function*(){return new Promise((o,r)=>{try{(0,a.DO)(({status:r,authResponse:i})=>{o(),r===s.qR.connected&&t().modal.popup&&(e((0,n.lL)(i)),e((0,c.y)(d.E.facebookAds)))})}catch(e){r(e)}})}))},50432:function(e,t,o){o.d(t,{a:function(){return u}});var r=o(59312);var n=o(94704);var i=o(55375);var a=o(4715);var s=o(14385);var c=o(79871);var d=o(6573);var l=o(13511);const u=(0,i.aP)(d.zG.tryPostToAdsAccount,({project:e,adsAccountId:t})=>(o,i)=>(0,r.mG)(void 0,void 0,void 0,function*(){if((0,s.yy)(e)&&(yield o((0,c.s)({project:e,format:l.jA.mp4,ops:{downloadProcessType:d.$I.facebookAds,shared:!0}}))),yield o((0,n.dg)(`act_${t}`)),!i().modal.popup)throw(0,a.n)("chain: tryPostToAdsAccount was interrupted")}))},69821:function(e,t,o){o.d(t,{f:function(){return f}});var r=o(59312);var n=o(55375);var i=o(61235);var a=o(29539);var s=o(20347);var c=o(24316);var d=o(18376);const l=/\/(artboard|plans)/;const u=({isOnPage:e,shouldOpenAfterAuthModal:t,backUrl:o})=>c.Q.get(d.E9.testRole)===d.pR.onboardingPaywallTester&&(!e&&t||e&&!l.test(o));var p=o(6573);var v=o(59725);var m=o(4717);var h=o(64564);const f=(0,n.aP)(p.zG.finishRegistration,e=>(t,o)=>(0,r.mG)(void 0,void 0,void 0,function*(){var r;const{auth:{error:n},modal:{options:{authPreviewPath:l}}}=o();const f=c.Q.get(d.E9.backUrl);yield t({type:`${v.w8}_${p.YT.fulfilled}`,payload:null===(r=null==n?void 0:n.context)||void 0===r?void 0:r.authResponse}),u({isOnPage:e,shouldOpenAfterAuthModal:l,backUrl:f})&&(o().subscriptionPlans.loading&&(yield s.V.waitFor([a.w.async.done.type])),t((0,i.h7)({popup:m.n.subscriptionModal,options:{popupType:h.B.subscriptionModalOnboarding}})))}))},30425:function(e,t,o){o.d(t,{w:function(){return s}});var r=o(59312);var n=o(55375);var i=o(18930);var a=o(6573);const s=(0,n.aP)(a.zG.getImagesPalettes,({images:e,count:t,arbiter:o,onFinish:n})=>()=>(0,r.mG)(void 0,void 0,void 0,function*(){const s=null==e?void 0:e.slice(0,t);if(!s)return;const c=s.map(e=>{const t=e.mediaId||e.dphId;return t&&(0,i.jj)({mediaId:t,mediaType:a.oZ.thumb})});const d=s.map((e,t)=>(0,r.mG)(void 0,void 0,void 0,function*(){const r=c[t];const n=undefined;if(c.slice(0,t).some((e,o)=>e===r&&o!==t))return{colors:[],imagePreview:void 0};const i=undefined;return{colors:(yield null==o?void 0:o.getImagePalette(e))||[],imagePreview:r}}));const l=undefined;const u=(yield Promise.all(d)).filter(e=>e.imagePreview&&e.colors.length&&e.colors.length>2);n(u)}))},3373:function(e,t,o){o.d(t,{v:function(){return h}});var r=o(59312);var n=o(39014);var i=o(97251);var a=o(48234);var s=o(55375);var c=o(86047);var d=o(6573);const l=800;const u=800;var p=o(87125);var v=o(20347);const m=()=>(e,t)=>(0,r.mG)(void 0,void 0,void 0,function*(){const e=()=>Object.values(t().arbiter.workspaceData.pageLoadingStatus).every(e=>e===a.LoadingStatus.Loaded);for(;!e();)yield v.V.waitFor([p.eK])});const h=(0,s.aP)(d.zG.getPreviews,({eventId:e,arbiter:t,project:o})=>(s,d)=>(0,r.mG)(void 0,void 0,void 0,function*(){const p=()=>(0,r.mG)(void 0,void 0,void 0,function*(){const{pageWidth:e,pageHeight:r,pages:n}=o;const{width:c,height:d}=(0,a.fitImageDimensions)({width:e,height:r},{width:Math.min(e,l),height:Math.min(r,u)},a.FitImageMode.Contain);yield s(m());const p=undefined;return(yield Promise.all(n.map(({uuid:e})=>t.getPreview({pageUuid:e,width:c,height:d,format:i.ExportType.Jpeg,quality:.8})))).map(e=>({dataUrl:e}))});const{partner:{features:v,frameId:h}}=d();(0,c.eb)({completedEventType:n.kR.getPreviewsCompleted,failedEventType:n.kR.getPreviewsFailed,featureName:n.Wz.automaticExport,eventId:e,callback:p,partnerFeatures:v,partnerFrameId:h})}))},52804:function(e,t,o){o.d(t,{J:function(){return d}});var r=o(59312);var n=o(48234);var i=o(55375);var a=o(28537);var s=o(6573);const c=5;const d=(0,i.aP)(s.zG.getRecentStyles,({projects:e,arbiter:t,onFinish:o})=>()=>(0,r.mG)(void 0,void 0,void 0,function*(){if(e.length<1)return;const i=e.length>=5?5:e.length;const s=undefined;const c=e.slice(0,i).map(e=>(0,r.mG)(void 0,void 0,void 0,function*(){const o=e.pages[0].elements.map(e=>e);const r=yield(0,a.fs)({elements:o,arbiter:t});const i=(0,n.getFontNamesFromTemplates)(o);const{mainFont:s,secondaryFont:c,thirdFont:d}=i;return{colors:r,mainFont:s,secondaryFont:c,thirdFont:d,name:e.name}}));const d=yield Promise.all(c);o(d)}))},70834:function(e,t,o){o.d(t,{f:function(){return P}});var r=o(59312);var n=o(55375);var i=o(6573);var a=o(4338);var s=o(14385);var c=o(24434);var d=o(48234);const l=[i.Gj.photos,i.Gj.video,i.Gj.background,i.Gj.objects,i.Gj.music,i.Gj.designs];const u=[d.DesignElementType.EllipseElement,d.DesignElementType.ShapeElement,d.DesignElementType.SimpleLineElement];const p=[i.k6.regular,i.k6.animated];const v=({recentMedia:e})=>(t,o)=>(0,r.mG)(void 0,void 0,void 0,function*(){const r=o();const{auth:{currentUser:n},partner:{currentPartner:d},sidebar:v,designs:{selectedDesign:m}}=r;const h=(0,c.Ux)(v);const{type:f="",templateType:y}=e;const g=(0,c.jm)(r);const b=e.id&&n.id&&!(0,s.Ye)(d)&&!(0,s.xy)(n,d)&&h&&l.includes(v.activeSidebarTab)&&!u.includes(f)&&(!y||p.includes(y));const P=v.activeSidebarTab===i.Gj.designs;b&&t((0,a.Od)({recentMedia:P&&m?m:(0,c.GM)(e),recentType:h,shouldLiveUpdate:g}))});var m=o(18851);var h=o(36765);var f=o(18376);const y=[i.Yj.videoElement,i.Yj.imageElement,i.Yj.svgElement];const g={[f.Q2.animated]:h.w.animations,[f.Q2.static]:h.w.objects};const b=({mediaItem:e,mediaItemGroupKey:t=""})=>(o,n)=>(0,r.mG)(void 0,void 0,void 0,function*(){const{mediaId:r="",type:a,collectionDphId:c}=e;const{auth:{currentUser:d},partner:{currentPartner:l},sidebar:{activeSidebarTab:u,activeObjectsTab:p}}=n();const v=u===i.Gj.objects&&g[p];!("isSimilarsCollection"in e)&&!(0,s.xy)(d)&&!(0,s.Ye)(l)&&a&&y.includes(a)&&r&&c&&v&&o((0,m.Y)({collectionDphId:c,excludedMediaIds:[r],type:v,mediaItemGroupKey:t}))});const P=(0,n.aP)(i.zG.handleAddElementAsync,({mediaItem:e,mediaItemGroupKey:t})=>o=>(0,r.mG)(void 0,void 0,void 0,function*(){o(b({mediaItem:e,mediaItemGroupKey:t})),o(v({recentMedia:e}))}))},79871:function(e,t,o){o.d(t,{s:function(){return B}});var r=o(59312);var n=o(39014);var i=o(51042);var a=o(55375);var s=o(24413);var c=o(10606);var d=o(4715);var l=o(57628);var u=o(6573);var p=o(28163);var v=o(3598);const m=(e,t)=>(o,r)=>{const n=t[r]-1;const{uuid:i}=e.pages[n];return Object.assign({uuid:i},o)};var h=o(18376);const f=1500;const y=({project:e,pagesRange:t})=>(o,n,i)=>(0,r.mG)(void 0,void 0,void 0,function*(){let o;o=t?(0,p.p)(t,e.pages.length):e.pages.map((e,t)=>t+1);const{previewJobId:r}=yield i.post("/api/partner-lowreshires/preview",{projectId:e.id,pagesRange:o});let n;for(;!n;){yield(0,v._)(f);const{status:e,previews:t}=yield i.get(`/api/partner-lowreshires/preview/${r}`);if(e===h.cu.completed){if(!t)throw new Error("LowRes previews undefined");n=t}if(e===(h.cu.failed||h.cu.canceled))throw new Error("LowRes preview rendering failed")}return n.map(m(e,o))});var g=o(61235);var b=o(53792);var P=o(46387);var j=o(32707);const T=e=>(t,o)=>(0,r.mG)(void 0,void 0,void 0,function*(){const{modal:{popup:r,options:n}}=o();try{(0,b.hP)(e.project)&&(yield t((0,P.a)())),yield t((0,j.Y)(e.project))}catch(e){throw(0,d.n)("stepCombination: tryPurchaseUnpaidProjectItems was interrupted")}finally{r&&t((0,g.h7)({popup:r,options:Object.assign(Object.assign({},n),{downloadParams:e,reopened:!0})}))}});var w=o(48216);var G=o(14385);function I(e,t,o){const{format:r,extension:i,path:a,projectId:s,originalName:c,width:d,height:l,measureUnits:u}=e;const p={url:CONFIG.url+a,extension:i,id:s,format:r,projectName:c,width:d,height:l,measureUnits:u,designType:t};(0,G.oi)(n.kR.publish,o,p)}function S(e,t,o,r,i){const{format:a,projectId:s,downloadId:c,originalName:d,width:l,height:u,measureUnits:p}=e;const v={downloadId:c,licensableItems:o.map(e=>({id:e})),previews:t,id:s,format:a,projectName:d,width:l,height:u,measureUnits:p,designType:r};(0,G.oi)(n.kR.publish,i,v)}var C=o(26539);const k="/api/print-api/print-url";var E=o(98605);var x=o(75513);var O=o(90506);const F=x.GM.gaEv,R=O.f1,A="show",z="printingPreparationSuccess";const M={event:x.GM.gaEv,eventCategory:O.f1,eventAction:"redirect",eventLabel:"toVistaPrint"};const D=e=>(t,o,n)=>(0,r.mG)(void 0,void 0,void 0,function*(){const{modal:{options:{project:{id:t,group:r,format:i,originalDimensions:a},selectedPages:s}},common:{language:c}}=o();const d=(0,l.Yq)(r,i);if(!a||!d||!(null==e?void 0:e.path))return;const{printUrl:u}=yield n.get(k,{projectId:t,format:d.key,width:a.width,height:a.height,pages:null==s?void 0:s.length,fileUri:`${CONFIG.url}${e.path}`,editUrl:`${CONFIG.url}${E.ih[c].prefix}/user/projects/${t}`});(0,C.J)(Object.assign(Object.assign({},M),{eventCallback:()=>{u&&(window.location.href=u)}}))});const N=({lowResHiResPreviews:e,downloadProcessType:t,download:o,formatKey:n})=>(i,a,s)=>(0,r.mG)(void 0,void 0,void 0,function*(){const{partner:{frameId:r}}=a();if(e){const{licensableItems:t}=yield s.get(`/api/partner-lowreshires/lowreshires-data/${o.downloadId}`);S(o,e,t,n,r)}else{if(!(0,w.J)(o))throw Error("Download path or extension is missing");if(t)switch(t){case u.$I.local:(0,G.jZ)(o);break;case u.$I.partnerPublish:I(o,n,r);break;case u.$I.redirect:i(D(o))}}});const B=(0,a.aP)(u.zG.handleProjectDownload,e=>(t,o)=>(0,r.mG)(void 0,void 0,void 0,function*(){const{modal:{popup:r},partner:{features:a}}=o();const u=(0,c.E)(n.Wz.lowResHiResDownload,a,!1);u||(yield t(T(e)));const p=[t((0,s.xz)(e))];u&&p.push(t(y({project:e.project,pagesRange:e.ops.pagesRange})));const[,v]=yield Promise.all(p);const{downloads:{download:m},modal:{popup:h}}=o();if(!m){if(r&&!h)throw(0,d.n)("chain: handleProjectDownload was interrupted");throw Error("Download data does not exist")}const{key:f}=(0,l.Yq)(e.project.group,e.project.format)||i.ZE[i.In.custom];yield t(N({lowResHiResPreviews:v,downloadProcessType:e.ops.downloadProcessType,download:m,formatKey:f}))}))},21535:function(e,t,o){o.d(t,{b:function(){return O}});var r=o(59312);var n=o(39014);var i=o(55375);var a=o(11942);var s=o(23772);var c=o(1994);var d=o(86047);var l=o(59556);var u=o(97754);var p=o(51042);var v=o(97932);var m=o(83532);var h=o(62931);var f=o(44251);var y=o(63305);var g=o(85725);var b=o(10606);var P=o(98605);var j=o(6573);const T=e=>e in n.Wz;const w=e=>Object.values(j.Gj).some(t=>t===e);const G=(e,t)=>{let o=Object.assign({},e);let r=!1;return Object.entries(j.Df.sidebar).forEach(([n,i])=>{const a=t[n];if(!a||!(0,b.E)(i,e,!1))return o[i]=!1,void Object.values(j.Df[n]||{}).forEach(e=>{o[e]=!1});if(!Array.isArray(a))return void(r=!0);let s=!1;const c={};Object.entries(j.Df[n]||{}).forEach(([t,o])=>{a.includes(t)&&(0,b.E)(o,e,!1)?s=!0:c[o]=!1}),s?(r=!0,o=Object.assign(Object.assign({},o),c)):o[i]=!1}),r?o:e};const I=(e,t,o)=>{const{sidebarTabs:r,sidebarTabsConfig:i,downloadFormat:a,features:s={}}=e;let c=Array.isArray(r)?r.reduce((e,t)=>Object.assign(Object.assign({},e),{[t]:!0}),{}):{};"object"==typeof i&&Object.keys(i).length&&(0,d.j3)({featureName:n.Wz.allowSubTabsConfiguration,partnerFeatures:t,partnerFrameId:o})&&(c=i);let l=G(t,c);return(0,v.ak)(a)&&m.JY.forEach(e=>{l=Object.assign(Object.assign({},l),{[e.partnerFeature]:e.partnerDownloadFormat===a&&t[e.partnerFeature]})}),Object.entries(s).forEach(([e,t])=>{T(e)&&(0,d.j3)({featureName:e,partnerFeatures:l,partnerFrameId:o})&&(l=Object.assign(Object.assign({},l),{[e]:t}))}),l};const S=({designId:e,designIdToCopy:t,user:o,userProjects:r},n,i,a)=>i.id||!(e||t||r||(null==o?void 0:o.email))?a:(0,f.CN)({pathname:`${P.ih[n].prefix}/login/`,query:{backUrl:a}});const C=(e,t,o)=>{const{templateId:r,designId:n,designType:i,customDesignFormatId:a,customDimensions:s,customTemplateId:c,designIdToCopy:d,userProjects:l}=e;let u={};if(d&&(u.designIdToCopy=d),l)return S(e,t,o,`${P.ih[t].prefix}/user/projects/`);if(n)return S(e,t,o,(0,f.CN)({pathname:`${P.ih[t].prefix}/user/projects/${n}/`,query:u}));if(r)u.template=r,i&&(u.formatKey=i);else if(c)u.customTemplateId=c;else if(a)u=Object.assign(Object.assign({},u),{newDesign:!0,custom:!0,customDesignFormatId:a});else if(s){const{width:e,height:t,measureUnits:o}=s;u=Object.assign(Object.assign({},u),{newDesign:!0,custom:!0,width:e,height:t,measureUnits:o})}else u=Object.assign(Object.assign({},u),{newDesign:!0,formatKey:i});return S(e,t,o,(0,f.CN)({pathname:`${P.ih[t].prefix}/artboard/`,query:u}))};const k=({bleedTrim:e,activeSidebarTab:t,lockPages:o,forbidNewElements:r,photoLibrary:n,tabsContentCategories:i,projectName:a,searchQueryTemplates:s,searchQueryPhotos:c,logoUrl:d,locales:l,user:u,exportQuality:p})=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({logoUrl:d,projectName:a,searchQueryTemplates:s,searchQueryPhotos:c},!isNaN(Number(e))&&{bleedTrim:Number(e)}),w(t)&&{activeSidebarTab:t}),Array.isArray(i)&&{tabsContentCategories:(0,v.M4)(i)}),(0,h.jn)(o)&&{lockPages:o}),(0,h.jn)(r)&&{forbidNewElements:r}),"object"==typeof n&&n.customParams&&{photoLibrary:n}),l&&{locales:l}),u&&{user:u}),!isNaN(Number(p))&&{exportQuality:p});const E=(e,t,o)=>{var r;const{designType:i,customDimensions:a,downloadFormat:s,instances:c=1}=e;if((0,v.ak)(s)){const e=null===(r=m.JY.find(e=>e.partnerDownloadFormat===s))||void 0===r?void 0:r.partnerFeature;if(e&&!(0,b.E)(e,o,!1))return{errorCode:n.r5.wrongDownloadFormat,context:{interpolate:{downloadFormatKey:s}}}}return i&&!t.allowedDesignFormatKeys.includes(i)?{errorCode:n.r5.wrongFormat,context:{interpolate:{designFormatKey:i}}}:a&&!t.allowedDesignFormatKeys.includes(p.In.custom)?{errorCode:n.r5.wrongCustomFormat}:c>1&&!(0,b.E)(n.Wz.multipleEditorInstances,o,!1)?{errorCode:n.r5.featureNotEnabled,context:{interpolate:{featureName:n.Wz.multipleEditorInstances}}}:void 0};const x=(e,t)=>{Object.keys(e).forEach(e=>y.G.increment(g.C.PartnerInitializeOptions,1,{option:e,partnerId:t.id,partnerApiKey:t.apiKey,partnerName:t.partnerName}))};const O=(0,i.aP)(j.zG.initializePartnerConfig,e=>(t,o)=>(0,r.mG)(void 0,void 0,void 0,function*(){const{common:{language:r,locale:i},auth:{currentUser:p},partner:{currentPartner:v,features:m,frameId:h}}=o();if(!v||!m)return;const{payload:f}=e.data;const y=E(f,v,m);if(y)return null===u.m||void 0===u.m?void 0:u.m.replace((0,l.P1)(y,r));x(f,v),t((0,a.uK)(k(f))),t((0,a.Z)(I(f,m,h)));const{partner:{partnerFrameConfig:{locales:g}}}=o();(null==g?void 0:g[r])&&(0,d.j3)({featureName:n.Wz.translations,partnerFeatures:m,partnerFrameId:h})&&t((0,s.e)(r,Object.assign(Object.assign({},i),g[r]))),f.sidebarDesignType&&(0,d.j3)({featureName:n.Wz.partnerTemplateCustomFormats,partnerFeatures:m,partnerFrameId:h})&&t((0,c.cB)(f.sidebarDesignType)),null===u.m||void 0===u.m||u.m.replace(C(f,r,p))}))},15794:function(e,t,o){o.d(t,{I:function(){return d}});var r=o(59312);var n=o(55375);var i=o(59556);var a=o(97754);var s=o(56564);var c=o(6573);const d=(0,n.aP)(c.zG.loadUserDataAfterAuthorization,()=>(e,t)=>(0,r.mG)(void 0,void 0,void 0,function*(){const{auth:{currentUser:{language:o}}}=t();yield e((0,s.A)()),null===a.m||void 0===a.m||a.m.replace((0,i.Uv)(o,a.m.location.search))}))},20002:function(e,t,o){o.d(t,{J:function(){return u}});var r=o(59312);var n=o(55375);var i=o(70987);var a=o(30875);var s=o(61235);var c=o(6573);var d=o(46627);var l=o(4717);const u=(0,n.aP)(c.zG.manageSocialAccount,({account:e,accountAction:t})=>o=>(0,r.mG)(void 0,void 0,void 0,function*(){const{oauthUrl:r,social:n,id:c}=e;if(t===d.A.reconnect)return o((0,a.KH)(r)),void o((0,s.h7)({popup:l.n.connectSocialMediaAccount,options:{social:n,onClose:()=>{o((0,i.f7)())}}}));t===d.A.removeConnection&&(yield o((0,i.yF)(c))),yield o((0,i.f7)())}))},13322:function(e,t,o){o.d(t,{M:function(){return l}});var r=o(59312);var n=o(2636);var i=o(55375);var a=o(29566);var s=o(61235);var c=o(6573);var d=o(18376);const l=(0,i.aP)(c.zG.moveToContentFolder,({folderId:e,item:t})=>(o,i)=>(0,r.mG)(void 0,void 0,void 0,function*(){const{activeSidebarTab:r}=i().sidebar;try{r!==c.Gj.contentDisarranged?yield o((0,a.kC)({item:t,folderId:e})):t.favoriteItem&&(yield o((0,a.Ql)({favoriteItemId:t.favoriteItem.id,folderId:e,currentFolderId:d.Sl.disarranged}))),o((0,s.Mr)()),o((0,n.g)(c.JF.moveToContentFolderSuccess))}catch(e){o((0,n.g)(c.JF.moveToContentFolderFailed))}}))},250:function(e,t,o){o.d(t,{W:function(){return c}});var r=o(59312);var n=o(55375);var i=o(68841);var a=o(1994);var s=o(6573);const c=(0,n.aP)(s.zG.openFavorites,e=>t=>(0,r.mG)(void 0,void 0,void 0,function*(){t(t((0,i.v7)(e))),t((0,a.JW)({activeSidebarTab:s.Gj.favorites}))}))},42986:function(e,t,o){o.d(t,{J:function(){return j}});var r=o(59312);var n=o(61235);var i=o(55375);var a=o(15751);var s=o(59661);var c=o(57628);var d=o(97754);var l=o(23125);var u=o(8477);const p=e=>{const t=e.get("selectedPlan");const o=e.get("isTrialDisabled");const r=e.get("promoCode");return Object.assign(Object.assign(Object.assign(Object.assign({},(0,u.Z)(t)&&{selectedPlan:t}),o&&{isTrialDisabled:!0}),r&&{promoCode:r}),{forceSelectPlan:!0})};var v=o(6573);var m=o(17103);var h=o(62812);var f=o(43559);var y=o(22483);var g=o(4717);var b=o(56590);var P=o(88177);const j=(0,i.aP)(v.zG.openModalByQuery,()=>(e,t)=>(0,r.mG)(void 0,void 0,void 0,function*(){const{auth:{currentUser:o}}=t();const r=new URLSearchParams(null===d.m||void 0===d.m?void 0:d.m.location.search);const u=r.get("popup");if(u){switch(yield e((0,y.O)([v.zG.artBoardTour,v.zG.tryOpenSubscriptionRebillModal])),yield e((0,m.y)()),u){case g.n.login:case g.n.registration:e((0,i.t5)(v.zG.authorizationUser,{popup:u}));break;case g.n.subscriptionModal:const t=p(r);e((0,P.c)(t));break;case g.n.replaceCardModal:e((0,n.h7)(s.J));break;case g.n.joinTeamModal:e((0,n.h7)({popup:u}));break;case g.n.logoMakerModal:e((0,h.t)());break;case g.n.productModal:{const t=r.get("product");(0,l.v)(t)&&e((0,b.v)(t));break}case g.n.newContributor:{e((0,n.h7)({popup:u}));const t=undefined;(0,c.tw)(o,v.pR.contributor)&&e((0,f.r)(v.xJ));break}}(0,a.G)(["popup","email","token","product"])}}))},86537:function(e,t,o){o.d(t,{s:function(){return c}});var r=o(59312);var n=o(55375);var i=o(1994);var a=o(91068);var s=o(6573);const c=(0,n.aP)(s.zG.openShapes,({data:e,tab:t})=>o=>(0,r.mG)(void 0,void 0,void 0,function*(){o((0,i.JW)({activeSidebarTab:t})),o((0,a.j4)(e))}))},51679:function(e,t,o){o.d(t,{M:function(){return l}});var r=o(59312);var n=o(55375);var i=o(19807);var a=o(66471);var s=o.n(a);const c=(e,t)=>!s()(e.pages,t.pages);var d=o(6573);const l=(0,n.aP)(d.zG.popProjectData,e=>(t,o)=>(0,r.mG)(void 0,void 0,void 0,function*(){const{arbiter:r,project:n}=e;const a=undefined;const s=o().projectData.project;const d=undefined;c(s,n)&&(t({type:i.Mv,payload:n}),null==r||r.applyProject(n,{silent:!0}))}))},56590:function(e,t,o){o.d(t,{v:function(){return p}});var r=o(59312);var n=o(55375);var i=o(84514);var a=o(61235);var s=o(20347);var c=o(6573);var d=o(4717);var l=o(56564);var u=o(66970);const p=(0,n.aP)(c.zG.openProductModal,e=>(t,o)=>(0,r.mG)(void 0,void 0,void 0,function*(){const{currentPage:r}=o().common;r!==u.s.formatTemplates&&(yield t((0,l.y)()));const{loading:n,loaded:c}=o().products;c||(n||t((0,i.Q)()),yield s.V.waitFor([i.Q.async.done.type]));const{items:p}=o().products;const v=p.find(({name:t})=>t===e);v&&t((0,a.h7)({popup:d.n.productModal,options:{product:v}}))}))},66708:function(e,t,o){o.d(t,{F:function(){return p}});var r=o(59312);var n=o(55375);var i=o(62385);var a=o(20347);var s=o(3598);var c=o(51115);const d=2500;const l=()=>(e,t)=>(0,r.mG)(void 0,void 0,void 0,function*(){yield(0,s._)(d);const{error:o,printingJob:r}=t().printing;if(!(null==r?void 0:r.id)||o)return;yield e((0,i.mS)());const{printingJob:n}=t().printing;const a=undefined;n&&n.status&&c.FQ.includes(n.status)||(yield e(l()))});var u=o(6573);const p=(0,n.aP)(u.zG.printProject,e=>(t,o)=>(0,r.mG)(void 0,void 0,void 0,function*(){const{checkingAvailability:r}=o().printing;if(r&&(yield a.V.waitFor([i.Dr.async.done.type,i.Dr.async.failed.type])),!o().printing.isPrintAvailable)return;const{project:n,selectedPages:s}=o().modal.options;t((0,i.NA)()),yield t((0,i.Kk)({project:n,selectedPages:s})),o().printing.loading&&(yield t((0,i.Fz)(e)),o().printing.loading&&(yield Promise.race([t(l()),a.V.waitFor([i.JI.type])])))}))},11458:function(e,t,o){o.d(t,{f:function(){return d}});var r=o(59312);var n=o(55375);var i=o(87323);var a=o(50692);var s=o(6573);var c=o(4423);const d=(0,n.aP)(s.zG.togglePrintAreas,({isVisible:e,arbiter:t})=>o=>(0,r.mG)(void 0,void 0,void 0,function*(){null==t||t.setBleedVisibility(e),o((0,i.iU)(e)),yield o((0,a.UI)({isPrintAreaVisible:e})),o((0,c.P)())}))},3927:function(e,t,o){o.d(t,{Y:function(){return b}});var r=o(59312);var n=o(2636);var i=o(61235);var a=o(19258);var s=o(55375);var c=o(70874);var d=o(97754);var l=o(3102);var u=o(7790);var p=o(24316);var v=o(48604);var m=o(6573);var h=o(18376);var f=o(4717);function y(){const{popup:e,selectedPlan:t,mediaId:o,dphId:r,pagesRange:n,downloadProcessType:i,promoId:a,payMethod:s,isTransferringPaymentProvider:c}=(0,v.d)(p.Q.get(h.E9.stateBeforeExternalBilling))||{};return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},e&&e in f.n&&{popup:e}),t&&t in l.bg&&{selectedPlan:t}),o&&{mediaId:String(o)}),r&&{dphId:String(r)}),c&&{isTransferringPaymentProvider:c}),n&&{pagesRange:String(n)}),i&&i in m.$I&&{downloadProcessType:i}),a&&{promoId:String(a)}),s&&s in u.j&&{payMethod:s})}var g=o(80249);const b=(0,s.aP)(m.zG.processExternalBillingResult,()=>(e,t)=>(0,r.mG)(void 0,void 0,void 0,function*(){const o=new URLSearchParams(null===d.m||void 0===d.m?void 0:d.m.location.search);const s=o.get("externalBilling");if(!s)return;const l=o.get("result")===g.F1.success;const u=!l&&s===g.Gf["3ds"];const{project:p}=t().projectData;const v=y(),{popup:h}=v,b=(0,r._T)(v,["popup"]);switch(h){case f.n.subscriptionModal:if(!l){e((0,i.h7)({popup:f.n.subscriptionModal,options:Object.assign(Object.assign({},b),{isExternalError:u})}));break}e((0,i.h7)({popup:f.n.subscriptionSuccessfulModal}));break;case f.n.invoiceModal:!l&&(0,c.X)(p)&&(e((0,a.hp)(Object.assign(Object.assign({},b),{project:p}))),e((0,i.h7)({popup:f.n.invoiceModal,options:{project:p,downloadProcessType:b.downloadProcessType,isExternalError:u}})));break;case f.n.replaceCardModal:const{isTransferringPaymentProvider:t}=b;if(!l){e((0,i.h7)({popup:f.n.replaceCardModal,options:{isExternalError:u,isTransferringPaymentProvider:t}}));break}if(t){e((0,i.h7)({popup:f.n.replaceCardModal,options:{shouldShowSuccessResult:!0}}));break}e((0,n.g)(m.JF.cardReplaced))}}))},53370:function(e,t,o){o.d(t,{v:function(){return l}});var r=o(59312);var n=o(55375);var i=o(14656);var a=o(61235);var s=o(6573);var c=o(50815);var d=o(36770);const l=(0,n.aP)(s.zG.deletePublication,e=>(t,o,n)=>(0,r.mG)(void 0,void 0,void 0,function*(){if(!e)return;const{selectedDate:r}=o().scheduler;yield n.delete(`${i.Ww}/publications/publicationId/${e.id}`),t((0,c.x)(r)),t((0,d.x)()),t((0,a.Mr)())}))},92257:function(e,t,o){o.d(t,{b:function(){return m}});var r=o(59312);var n=o(55375);var i=o(14656);var a=o(61235);var s=o(24133);var c=o(6573);var d=o(93365);var l=o(90448);var u=o(13511);var p=o(50815);var v=o(36770);const m=(0,n.aP)(c.zG.duplicatePublication,({submitParams:e,copiedPublication:t,isReels:o})=>(n,c,m)=>(0,r.mG)(void 0,void 0,void 0,function*(){const{selectedDestinations:r,selectedPages:h,postDetails:f,scheduledOn:y,shareToFeed:g,coverPage:b}=e;if(!t||!y)return;const{selectedDate:P}=c().scheduler;const{id:j,social:T,projectPages:w}=t;const G=t&&(0,s.AO)(t.format);yield m.post(`${i.Ww}/duplicate`,Object.assign(Object.assign({publicationId:j,social:T,destinations:r,projectPages:G?w:h,postDetails:f,scheduledOn:y},o&&{mediaType:l.T.reels,format:u.jA.mp4}),o&&T===d.I_.instagram&&{shareToFeed:g,coverPage:b})),n((0,p.x)(P)),n((0,v.x)()),n((0,a.Mr)())}))},40317:function(e,t,o){o.d(t,{C:function(){return d}});var r=o(59312);var n=o(55375);var i=o(14656);var a=o(6573);var s=o(50815);var c=o(36770);const d=(0,n.aP)(a.zG.editPublication,e=>(t,o,n)=>(0,r.mG)(void 0,void 0,void 0,function*(){const{publicationId:a,groupId:d,shouldIncludePublicationIdWithGroup:l,isDataSyncPrevented:u}=e,p=(0,r._T)(e,["publicationId","groupId","shouldIncludePublicationIdWithGroup","isDataSyncPrevented"]);const{selectedDate:v}=o().scheduler;yield n.patch(`${i.Ww}/update-info`,Object.assign(Object.assign({},d?Object.assign({groupId:d},l&&{publicationId:a}):{publicationId:a}),p)),u||(t((0,s.x)(v)),t((0,c.x)()))}))},22977:function(e,t,o){o.d(t,{J:function(){return u}});var r=o(59312);var n=o(55375);var i=o(61235);var a=o(6573);var s=o(40317);var c=o(90448);var d=o(13511);var l=o(93365);const u=(0,n.aP)(a.zG.handleClickEditPublication,({submitParams:e,isDestinationChanged:t,areDetailsChanged:o,isReels:n,isAnimatedPublication:a})=>(u,p)=>(0,r.mG)(void 0,void 0,void 0,function*(){const r=p().scheduler.currentPublication;if(!r)return;const{selectedDestinations:[v],selectedPages:m,postDetails:h,scheduledOn:f,shareToFeed:y,coverPage:g}=e;const{id:b,social:P,groupId:j}=r;t&&(yield u((0,s.C)(Object.assign(Object.assign({publicationId:b,groupId:j,social:P,destination:v,isDataSyncPrevented:o,shouldIncludePublicationIdWithGroup:!0},n&&{mediaType:c.T.reels,format:d.jA.mp4}),n&&P===l.I_.instagram&&{shareToFeed:y,coverPage:g})))),o&&(yield u((0,s.C)(Object.assign(Object.assign(Object.assign(Object.assign({publicationId:b,groupId:j,social:P},!a&&{projectPages:m}),{postDetails:h,scheduledOn:f}),n&&{mediaType:c.T.reels,format:d.jA.mp4}),n&&P===l.I_.instagram&&{shareToFeed:y,coverPage:g})))),u((0,i.Mr)())}))},17748:function(e,t,o){o.d(t,{B:function(){return c}});var r=o(59312);var n=o(55375);var i=o(61235);var a=o(6573);var s=o(40317);const c=(0,n.aP)(a.zG.handleClickPublicationSplit,({submitParams:e,isAnimatedPublication:t})=>(o,n)=>(0,r.mG)(void 0,void 0,void 0,function*(){const r=n().scheduler.currentPublication;if(!r)return;const{selectedPages:a,postDetails:c,scheduledOn:d}=e;const{id:l,social:u}=r;yield o((0,s.C)(Object.assign(Object.assign({publicationId:l,social:u,destination:r.destination},!t&&{projectPages:a}),{postDetails:c,scheduledOn:d}))),o((0,i.Mr)())}))},37299:function(e,t,o){o.d(t,{w:function(){return l}});var r=o(59312);var n=o(93795);var i=o(55375);var a=o(70987);var s=o(23175);var c=o(6573);var d=o(22027);const l=(0,i.aP)(c.zG.handleManageAccounts,({social:e,mainAction:t})=>(o,i)=>(0,r.mG)(void 0,void 0,void 0,function*(){const{connectedAccounts:r}=i().socialMediaPublishing;const c=r.find(t=>t.social===e);c&&t&&(0,n.u)(t)&&(yield o((0,a.yF)(c.id)),yield o((0,s.f7)()),o((0,d.i)({social:e,serviceKey:t})))}))},48155:function(e,t,o){o.d(t,{D:function(){return h}});var r=o(59312);var n=o(55375);var i=o(14656);var a=o(70526);var s=o(70874);var c=o(4715);var d=o(3598);const l=2500;const u=e=>(t,o)=>(0,r.mG)(void 0,void 0,void 0,function*(){yield(0,d._)(l),yield t((0,a.Ye)(e));const{items:r}=o().projectPosts;const n=undefined;r.some(({isDesignProcessing:e})=>e)&&(yield t(u(e)))});var p=o(11606);var v=o(6573);var m=o(98572);const h=(0,n.aP)(v.zG.handleProjectPostsUpdate,()=>(e,t,o)=>(0,r.mG)(void 0,void 0,void 0,function*(){yield e((0,m.U)(v._J.share));const{projectData:{project:r},projectPosts:{items:n}}=t();if(!(0,s.X)(r)||!n.length)throw(0,c.n)("chain: handleProjectPostsUpdate was interrupted");e((0,a.dU)(Date.now())),yield o.post(`${i.Ww}/update-designs`,{publicationsIds:n.map(({id:e})=>e),projectId:r.id,format:(0,p.y6)(r),projectWidth:r.pageWidth,projectHeight:r.pageHeight}),yield e(u(r.id))}))},22027:function(e,t,o){o.d(t,{i:function(){return u}});var r=o(59312);var n=o(61235);var i=o(55375);var a=o(30875);var s=o(93365);var c=o(6573);var d=o(4717);var l=o(72036);const u=(0,i.aP)(c.zG.handleStartConnectionFlow,({serviceKey:e,social:t,shouldRenderPostAndConnectButton:o})=>(i,u)=>(0,r.mG)(void 0,void 0,void 0,function*(){const{modal:{options:{project:r}},socialMediaPublishing:{connectedAccounts:p}}=u();const v=p.find(e=>e.social===t);const m=undefined;(!v||o||[s.bH.disconnected,s.bH.notEnoughPermissions].includes(v.status))&&(o&&v&&i((0,a.KH)(v.oauthUrl)),i((0,n.h7)({popup:d.n.connectSocialMediaAccount,options:{social:t,isExportFlow:!0,onClose:()=>{i((0,l.e)({project:r,selectedServiceKey:e,downloadProcessType:c.$I.local}))}}})))}))},60211:function(e,t,o){o.d(t,{j:function(){return d}});var r=o(59312);var n=o(55375);var i=o(14656);var a=o(6573);var s=o(93365);const c={[s.I_.facebook]:[s.gG.group,s.gG.page],[s.I_.instagram]:[s.gG.account],[s.I_.pinterest]:[s.gG.board]};const d=(0,n.aP)(a.zG.loadDestinations,()=>(e,t)=>(0,r.mG)(void 0,void 0,void 0,function*(){yield e((0,i.f7)());const o=undefined;const r=undefined;const n=t().scheduler.connectedAccounts.filter(({status:e})=>e===s.bH.connected).flatMap(({id:t,social:o})=>c[o].map(o=>e((0,i.s8)({accountId:t,destinationType:o}))));yield Promise.all(n)}))},33193:function(e,t,o){o.d(t,{t:function(){return u}});var r=o(59312);var n=o(99485);var i=o(44072);var a=o(51544);var s=o(55375);var c=o(14656);var d=o(6573);const l=10;const u=(0,s.aP)(d.zG.loadPublications,e=>(t,o)=>(0,r.mG)(void 0,void 0,void 0,function*(){const r=o().scheduler.feedStartDate||(0,n.Z)();const s=e===a.$.asc?o().scheduler.afterPublications:o().scheduler.beforePublications;const d=(0,i.Z)(r);const u=Math.floor(s.length/l)*l;e!==a.$.asc?t((0,c.RV)({limit:l,skip:u,from:d})):t((0,c.Dx)({limit:l,skip:u,from:d}))}))},6753:function(e,t,o){o.d(t,{k:function(){return c}});var r=o(59312);var n=o(51544);var i=o(55375);var a=o(6573);var s=o(33193);const c=(0,i.aP)(a.zG.loadSchedulerDefaultFeedState,()=>e=>(0,r.mG)(void 0,void 0,void 0,function*(){yield e((0,s.t)(n.$.asc)),yield e((0,s.t)(n.$.desc))}))},11123:function(e,t,o){o.d(t,{o:function(){return I}});var r=o(59312);var n=o(94762);var i=o(9939);var a=o(55375);var s=o(61235);var c=o(58853);var d=o(14656);var l=o(97754);var u=o(59556);var p=o(26539);var v=o(89154);var m=o(93365);const h=(e,t,o)=>{if(!o)return;const r=(0,v.Z)(Date.now(),o);const n=Object.assign(Object.assign({},e),{eventLabel:t,eventValue:String(r)});(0,p.J)(n)};const f=(e,t)=>t===i.J.view&&e.status===m.By.scheduled?i.J.edit:t;var y=o(6573);var g=o(79559);var b=o(4717);var P=o(11162);const j={[i.J.delete]:b.n.deletePublication,[i.J.duplicate]:b.n.duplicatePublication,[i.J.edit]:b.n.editPublication,[i.J.editDesign]:b.n.editDesign,[i.J.view]:b.n.viewPublication};const T={[i.J.delete]:g.eP,[i.J.duplicate]:g.wS,[i.J.edit]:g.HC,[i.J.editDesign]:g.D4,[i.J.view]:g.em};const w={[m.I_.facebook]:P.E.facebookReels,[m.I_.instagram]:P.E.instagramReels};var G=o(90448);const I=(0,a.aP)(y.zG.managePublication,({publication:e,action:t,shouldShowTimer:o})=>(a,v)=>(0,r.mG)(void 0,void 0,void 0,function*(){yield a((0,d.rU)(e.id)),(0,p.J)(Object.assign(Object.assign({},T[t]),{eventLabel:e.id}));const{common:{language:m},team:{currentTeam:y},modal:{options:{openedAt:g}}}=v();const b=f(e,t);const P=e.mediaType===G.T.reels;const I=Object.assign(Object.assign({},P&&{selectedServiceKey:w[e.social]}),{onEscOrOverlayClick:()=>(0,r.mG)(void 0,void 0,void 0,function*(){h(T[b],e.id,g)})});switch(b){case i.J.editDesign:return(0,n.default)(e.scheduledOn,new Date)?void(null===l.m||void 0===l.m||l.m.push((0,u.jq)({currentTeam:y,language:m,projectId:e.projectId}))):(yield a((0,c.XO)(e.projectId)),v().projects.postsByProject[e.projectId].length>1?void a((0,s.h7)({popup:j[b],options:Object.assign(Object.assign({},I),{openedAt:Date.now()})})):void(null===l.m||void 0===l.m||l.m.push((0,u.jq)({currentTeam:y,language:m,projectId:e.projectId}))));case i.J.edit:return void a((0,s.h7)({popup:j[b],options:Object.assign(Object.assign({},I),{shouldShowTimer:o})}));case i.J.delete:return void a((0,s.h7)({popup:j[b],options:Object.assign(Object.assign({},I),{openedAt:Date.now()})}));default:a((0,s.h7)(Object.assign({popup:j[b]},P&&{options:{selectedServiceKey:w[e.social]}})))}}))},8400:function(e,t,o){o.d(t,{N:function(){return s},_:function(){return c}});var r=o(90837);var n=o(24268);var i=o(32398);var a=o(93365);const s={[a.I_.facebook]:r.JU,[a.I_.instagram]:n.JU,[a.I_.pinterest]:i.JU};const c=2500},50199:function(e,t,o){o.d(t,{R:function(){return j}});var r=o(59312);var n=o(61235);var i=o(55375);var a=o(80440);var s=o(26539);var c=o(4715);var d=o(11606);var l=o(6573);var u=o(19258);var p=o(21356);var v=o(53792);var m=o(49659);var h=o(32707);var f=o(46387);const y=({project:e,onSuccessPayment:t})=>(o,n)=>(0,r.mG)(void 0,void 0,void 0,function*(){(0,v.hP)(e)&&(yield o((0,m.w)()),(0,p.BZ)(n().auth.subscription)||(yield o((0,f.a)()),null==t||t())),yield o((0,u.hp)({project:e})),n().unpaidItems.unpaidItems.length&&(yield o((0,h.Y)(e)),null==t||t())});var g=o(8400);var b=o(66970);var P=o(93365);const j=(0,i.aP)(l.zG.publishProject,e=>(t,o)=>(0,r.mG)(void 0,void 0,void 0,function*(){const{popup:r,options:i,options:{project:l}}=o().modal;if(!r)throw(0,c.n)("chain: publishProject was interrupted");const u=Object.assign({projectWidth:l.pageWidth,projectHeight:l.pageHeight,format:(0,d.y6)(l)},e);try{yield t(y({project:l,onSuccessPayment:()=>{(0,s.J)(g.N[e.social])}}))}catch(e){throw(0,c.n)("chain: publishProject was interrupted")}finally{t((0,n.h7)({popup:r,options:Object.assign(Object.assign({},i),{publishingParams:u,reopened:!0})}))}yield t((0,a.Js)(u)),yield t((0,d.Zi)());const{publishing:{status:p},common:{currentPage:v},projectPosts:{postsUpdateIsPending:m}}=o();v!==b.s.artBoard||p!==P.By.scheduled||m||t((0,d.rb)(l.id))}))},11606:function(e,t,o){o.d(t,{rb:function(){return v},Zi:function(){return m},y6:function(){return h}});var r=o(59312);var n=o(80440);var i=o(70526);var a=o(20347);var s=o(19807);var c=o(3598);var d=o(14385);var l=o(13511);var u=o(8400);var p=o(52273);const v=e=>t=>(0,r.mG)(void 0,void 0,void 0,function*(){t((0,i.PO)()),yield a.V.waitFor([s.Nu]),yield t((0,i.Ye)(e))});const m=()=>(e,t)=>(0,r.mG)(void 0,void 0,void 0,function*(){yield(0,c._)(u._);const{jobId:o}=t().publishing;if(!o)return;yield e((0,n.Ms)());const{status:r}=t().publishing;const i=undefined;r&&p.FQ.includes(r)||(yield e(m()))});const h=e=>(0,d.yy)(e)?l.jA.mp4:l.jA.jpg},36770:function(e,t,o){o.d(t,{x:function(){return s}});var r=o(59312);var n=o(55375);var i=o(14656);var a=o(6573);const s=(0,n.aP)(a.zG.reloadCalendar,()=>e=>(0,r.mG)(void 0,void 0,void 0,function*(){e((0,i.LZ)()),e((0,i.lI)())}))},50815:function(e,t,o){o.d(t,{x:function(){return c}});var r=o(59312);var n=o(55375);var i=o(14656);var a=o(6573);var s=o(6753);const c=(0,n.aP)(a.zG.reloadFeed,e=>t=>(0,r.mG)(void 0,void 0,void 0,function*(){e&&t((0,i.x8)(e)),t((0,i.Qs)()),t((0,s.k)())}))},57442:function(e,t,o){o.d(t,{h:function(){return l}});var r=o(59312);var n=o(55375);var i=o(61235);var a=o(97754);var s=o(59556);var c=o(6573);var d=o(40317);const l=(0,n.aP)(c.zG.splitPublicationDesign,({projectId:e,publication:t})=>(o,n,c)=>(0,r.mG)(void 0,void 0,void 0,function*(){if(!e||!t)return;const{id:r,social:l}=t;const{id:u}=yield c.post(`/api/projects/${e}/copy`);yield o((0,d.C)({publicationId:r,social:l,projectId:u}));const{common:{language:p},team:{currentTeam:v}}=n();null===a.m||void 0===a.m||a.m.push((0,s.jq)({currentTeam:v,language:p,projectId:u})),o((0,i.Mr)())}))},21948:function(e,t,o){o.d(t,{K:function(){return c}});var r=o(59312);var n=o(55375);var i=o(6573);var a=o(56564);var s=o(46387);const c=(0,n.aP)(i.zG.purchaseSubscription,e=>t=>(0,r.mG)(void 0,void 0,void 0,function*(){yield t((0,a.y)()),yield t((0,s.a)(e))}))},86598:function(e,t,o){o.d(t,{a:function(){return h}});var r=o(59312);var n=o(39014);var i=o(74721);var a=o(55375);var s=o(86047);var c=o(24310);var d=o(48234);var l=o(23543);const u=({replacements:e},{pages:t})=>{const o=[];return null==t||t.forEach(e=>{(0,l.traversePage)(e,e=>{e.type!==d.DesignElementType.ImageElement&&e.type!==d.DesignElementType.MaskElement||o.push(e)})}),e.filter(e=>o.find(t=>e.imageId===t.uuid))};var p=o(6573);var v=o(56564);var m=o(51717);const h=(0,a.aP)(p.zG.replacePartnerImages,({arbiter:e,payload:t,project:o})=>(a,d)=>(0,r.mG)(void 0,void 0,void 0,function*(){const l=()=>(0,r.mG)(void 0,void 0,void 0,function*(){yield a((0,v.y)());const n=[];const s=u(t,o);const d=yield a((0,m.p)(s.map(({src:e})=>e),p.Yj.imageElement));if(yield Promise.allSettled(s.map(t=>(0,r.mG)(void 0,void 0,void 0,function*(){if(null!==d[t.src]){const o=(0,c.St)(p.Pp.uploads,[d[t.src]])[0];const r=t.fitImageMode||i.FitImageMode.Cover;e.tryOnTry(t.imageId,o,r),e.tryOnFinish(t.imageId),yield e.waitForElementLoad(t.imageId),n.push(t.imageId)}}))),!n.length)throw new Error("All image urls are broken, please try again with valid url")});const{partner:{features:h,frameId:f}}=d();(0,s.eb)({callback:l,completedEventType:n.kR.imageReplaceCompleted,failedEventType:n.kR.imageReplaceFailed,eventId:t.eventId,featureName:n.Wz.imageReplace,partnerFeatures:h,partnerFrameId:f})}))},76507:function(e,t,o){o.d(t,{_:function(){return d}});var r=o(59312);var n=o(79034);var i=o(85393);var a=o(55375);var s=o(37823);var c=o(6573);const d=(0,a.aP)(c.zG.saveEraseRestore,e=>t=>(0,r.mG)(void 0,void 0,void 0,function*(){const{arbiter:o}=e;if(!o.selectedElement)return;const{uuid:a}=o.selectedElement;const c=[{filename:`${a}${n.EraseRestoreMode.Erase}.png`,base64:o.eraseRestoreExport(a,n.EraseRestoreMode.Erase)},{filename:`${a}${n.EraseRestoreMode.Restore}.png`,base64:o.eraseRestoreExport(a,n.EraseRestoreMode.Restore)}];const d=yield Promise.all(c.filter(({base64:e})=>!!e).map(({filename:e,base64:t})=>(0,r.mG)(void 0,void 0,void 0,function*(){return new File([yield(0,s.vZ)(t)],e)})));const l=yield t((0,i.LI)(d,{isMask:!0}));if(Array.isArray(null==l?void 0:l.result)&&l.result.length>0){const e={};l.result.forEach(({mediaId:t,originalName:o})=>{o.endsWith(n.EraseRestoreMode.Erase)&&(e.eraseMaskMediaId=t),o.endsWith(n.EraseRestoreMode.Restore)&&(e.restoreMaskMediaId=t)}),o.updateElement(Object.assign({uuid:a},e))}yield o.eraseRestoreSyncMasks(o.selectedElement.uuid)}))},81208:function(e,t,o){o.d(t,{s:function(){return p}});var r=o(59312);var n=o(55375);var i=o(23772);var a=o(58853);var s=o(55595);var c=o(97754);var d=o(6573);var l=o(4423);var u=o(66970);const p=(0,n.aP)(d.zG.saveProjectBeforeArtboardLeaving,({path:e})=>(t,o)=>(0,r.mG)(void 0,void 0,void 0,function*(){const r=o().artboard.editingMode===s.a.template;const n=o().artboard.editingMode===s.a.partnerTemplate;r||(yield t((0,l.P)({nextPageName:u.s.myProjects})),t((0,a.B1)(o().projectData.project))),t((0,i.ld)({url:((null===c.m||void 0===c.m?void 0:c.m.location.pathname)||"")+((null===c.m||void 0===c.m?void 0:c.m.location.search)||"")}));const p={activeFolderId:n?d.w8:d.ZJ};null===c.m||void 0===c.m||c.m.push(e,p)}))},31742:function(e,t,o){o.d(t,{h:function(){return d}});var r=o(59312);var n=o(2636);var i=o(55375);var a=o(6573);var s=o(32218);const c="/api/user-templates";const d=(0,i.aP)(a.zG.sendTemplatesForReview,e=>(t,o,i)=>(0,r.mG)(void 0,void 0,void 0,function*(){try{yield i.post(c,e),t((0,n.g)(a.JF.userTemplateSubmitForReviewSuccess))}catch(e){switch(e.caption){case s.v.projectHasUploads:t((0,n.g)(a.JF.buyoutTemplateSubmitForReviewUploadsError));break;case s.v.projectHasCustomFormat:t((0,n.g)(a.JF.buyoutTemplateSubmitForReviewCustomFormatError));break;case s.v.projectHasUnlimitedPlusContent:t((0,n.g)(a.JF.buyoutTemplateSubmitForReviewUnlimitedPlusError));break;case s.v.projectHasEditorialContent:t((0,n.g)(a.JF.userTemplateEditorialError));break;case s.v.userTemplateIsADuplicate:t((0,n.g)(a.JF.userTemplateDuplicateError));break;default:t((0,n.g)(a.JF.userTemplateSubmitForReviewError))}}}))},49108:function(e,t,o){o.d(t,{q:function(){return d}});var r=o(59312);var n=o(55375);var i=o(1302);var a=o(61235);var s=o(6573);var c=o(56564);const d=(0,n.aP)(s.zG.setPalletToBrandKit,({name:e,brandKitId:t,colors:o})=>n=>(0,r.mG)(void 0,void 0,void 0,function*(){n((0,a.Mr)()),yield n((0,c.y)()),n(o?(0,i.zO)({name:e,brandKitId:t,colors:o}):(0,i.zO)({name:e,brandKitId:t}))}))},74205:function(e,t,o){o.d(t,{k:function(){return p}});var r=o(59312);var n=o(61235);var i=o(55375);var a=o(59661);var s=o(67402);var c=o(6573);var d=o(49659);var l=o(70092);var u=o(58632);const p=(0,i.aP)(c.zG.showUpdateCardInfoModal,()=>(e,t)=>(0,r.mG)(void 0,void 0,void 0,function*(){if(!t().auth.currentUser.id)return;yield e((0,l.y)()),yield e((0,d.w)());const{common:{currentPage:o},auth:{subscription:r},userMetadata:{profiling:i},team:{currentTeam:c}}=t();!i&&u.Z2.has(o)||(0,s.E)(r,c)&&e((0,n.h7)(a.J))}))},67402:function(e,t,o){o.d(t,{E:function(){return i}});var r=o(18449);var n=o(24687);const i=(e,t)=>(0,r.Y)(e)&&!(0,n.SE)(t)},74999:function(e,t,o){o.d(t,{f:function(){return p}});var r=o(59312);var n=o(97932);var i=o(61235);var a=o(55375);var s=o(26951);var c=o(20347);var d=o(17103);var l=o(6573);var u=o(4717);const p=(0,a.aP)(l.zG.showWelcomeModal,()=>(e,t)=>(0,r.mG)(void 0,void 0,void 0,function*(){const{auth:{currentUser:o},userMetadata:{loaded:r},partner:{currentPartner:a}}=t();o.id&&(r||(yield c.V.waitFor([s.SP.async.done.type])),(0,n.an)({currentUser:o,currentPartner:a})&&(e((0,i.h7)({popup:u.n.mailSubscriptionModal})),yield e((0,d.y)())),(0,n.Ob)({currentUser:o,currentPartner:a,profiling:t().userMetadata.profiling})&&(e((0,i.h7)({popup:u.n.profilingModal})),yield e((0,d.y)())))}))},64438:function(e,t,o){o.d(t,{c:function(){return u}});var r=o(59312);var n=o(55375);var i=o(77840);var a=o(24316);var s=o(14385);var c=o(63539);var d=o(6573);var l=o(18376);const u=(0,n.aP)(d.zG.tryAcceptCookies,()=>(e,t)=>(0,r.mG)(void 0,void 0,void 0,function*(){const{auth:{currentUser:o},common:{currentPage:r,userAgent:{isMobile:n}},partner:{currentPartner:u}}=t();const p=undefined;!!o.id||n||!!a.Q.get(l.E9.allowCookies)||(0,c.D)(r)||(0,s.Ye)(u)||e((0,i.B)(d.fz.acceptCookies))}))},63539:function(e,t,o){o.d(t,{D:function(){return n}});var r=o(66970);const n=e=>[r.s.share,r.s.partnerError,...r.C].includes(e)},73349:function(e,t,o){o.d(t,{$:function(){return d}});var r=o(59312);var n=o(55375);var i=o(66777);var a=o(29539);var s=o(7945);var c=o(6573);const d=(0,n.aP)(c.zG.tryActivatePromoCode,({promoCode:e,onSuccessfulActivation:t})=>(o,n)=>(0,r.mG)(void 0,void 0,void 0,function*(){yield o((0,i.V)(e));const[r]=n().promo.activeItems;yield o((0,a.w)({promoId:r.id})),yield o((0,s.$)());const{list:c}=n().subscriptionPlans;const d=c.find(e=>e.type===r.subscriptionType&&e.isAvailableToSwitch);null==t||t(d)}))},69450:function(e,t,o){o.d(t,{k:function(){return g}});var r=o(59312);var n=o(42400);var i=o(88710);var a=o(55375);var s=o(97754);var c=o(59556);var d=o(57628);var l=o(6573);var u=o(56564);var p=o(46387);var v;const m={popupType:o(64564).B.versions};var h=o(61835);const f=({arbiterAdapter:e,currentSnapshot:t},o)=>{null==e||e.applyProject(t.project),null===s.m||void 0===s.m||s.m.push((0,n.Al)()),o((0,i.hJ)({name:h.B.versionsNotification,target:document.body}))};const y=({currentSnapshot:e},t,o,a)=>(0,r.mG)(void 0,void 0,void 0,function*(){const{common:{language:r},team:{currentTeam:d}}=o();const l=yield a.post(`/api/projects/${e.project.id}/snapshots/${e.id}/copy`);if(null===s.m||void 0===s.m||s.m.push((0,n.Al)()),null==l?void 0:l.id){const e=(0,c.jq)({currentTeam:d,language:r,projectId:l.id});t((0,i.hJ)({name:h.B.versionsNotification,target:document.body})),window.open(e,"_blank")}else t((0,i.hJ)({name:h.B.versionsNotificationFailed,target:document.body}))});const g=(0,a.aP)(l.zG.tryApplyVersion,e=>(t,o,n)=>(0,r.mG)(void 0,void 0,void 0,function*(){const{auth:{currentUser:r}}=o();return yield t((0,u.y)()),(0,d.tw)(r,l.pR.contributor)||(yield t((0,p.a)(m))),e.shouldCreateNewProject?y(e,t,o,n):f(e,t)}))},13144:function(e,t,o){o.d(t,{c:function(){return c}});var r=o(59312);var n=o(2636);var i=o(55375);var a=o(34176);var s=o(6573);const c=(0,i.aP)(s.zG.tryChangeDisplayName,e=>(t,o)=>(0,r.mG)(void 0,void 0,void 0,function*(){yield t((0,a._q)({userId:o().auth.currentUser.id,displayName:e})),t((0,n.g)(s.JF.contributorProfileUpdated))}))},48212:function(e,t,o){o.d(t,{f:function(){return c}});var r=o(59312);var n=o(55375);var i=o(58853);var a=o(6573);var s=o(10279);const c=(0,n.aP)(a.zG.tryChangeGroup,e=>t=>(0,r.mG)(void 0,void 0,void 0,function*(){t((0,s.C)({group:e})),t(e?(0,i.di)(e):(0,i.mk)())}))},62808:function(e,t,o){o.d(t,{y:function(){return d}});var r=o(59312);var n=o(55375);var i=o(54359);var a=o(58853);var s=o(6573);var c=o(10279);const d=(0,n.aP)(s.zG.tryCleanTrashFolder,()=>e=>(0,r.mG)(void 0,void 0,void 0,function*(){yield e((0,i.S)()),e((0,c.C)({skip:0})),e((0,a.NQ)())}))},59992:function(e,t,o){o.d(t,{S:function(){return d}});var r=o(59312);var n=o(6123);var i=o(55375);var a=o(6573);var s=o(56564);var c=o(46387);const d=(0,i.aP)(a.zG.tryDownloadAsset,({isFreeDownload:e,selectedPlan:t,authPreviewPath:o})=>(i,a)=>(0,r.mG)(void 0,void 0,void 0,function*(){a().creativeAssetsItem.isFreeDownload!==e&&i((0,n.SO)(e)),yield i((0,s.y)({authPreviewPath:o})),e||(yield i((0,c.a)({selectedPlan:t}))),i((0,n.x4)())}))},44486:function(e,t,o){o.d(t,{y:function(){return l}});var r=o(59312);var n=o(55375);var i=o(58853);var a=o(6573);var s=o(4706);var c=o(92526);var d=o(66984);const l=(0,n.aP)(a.zG.tryDropToFolder,e=>(t,o)=>(0,r.mG)(void 0,void 0,void 0,function*(){const{projects:{loading:r},folders:{activeFolderId:n,trashFolderId:l,isTrashFolderActive:u},draggable:{items:p}}=o();r||e===n||(e!==l?u?t((0,d.p)({ids:p,folderId:e})):(n!==a.ZJ&&(yield t((0,i.Kr)(p))),t((0,c.j)({folderId:e,ids:p}))):t((0,s.Q)(p)))}))},75410:function(e,t,o){o.d(t,{v:function(){return m}});var r=o(59312);var n=o(88710);var i=o(55375);var a=o(77955);var s=o(55595);var c=o(48234);var d=o(23543);const l=({pages:e},t)=>{const o=[];const r=[];return null==e||e.forEach(e=>{(0,d.traversePage)(e,e=>{switch(e.type){case c.DesignElementType.MaskElement:r.push(e);break;case c.DesignElementType.ImageElement:e.dphId&&t.includes(e.dphId)&&o.push(e.uuid)}})}),r.forEach(e=>{(0,d.traverseElement)(e,t=>{if(o.includes(t.uuid)){const r=o.indexOf(t.uuid);o[r]=e.uuid}})}),o};var u=o(6573);var p=o(4423);var v=o(61835);const m=(0,i.aP)(u.zG.tryHighlightPartnerUnpaidItems,({arbiter:e})=>(t,o)=>(0,r.mG)(void 0,void 0,void 0,function*(){const{tooltip:{items:r}}=o();r[v.B.highlightPartnerUnpaidItems]&&t((0,n.i8)(v.B.highlightPartnerUnpaidItems)),yield t((0,p.P)());const{projectData:{project:i,projectMode:c},artboard:{editingMode:d}}=o();if(!i.id)return;const u=undefined;const m=d===s.a.partnerTemplate?{customTemplateId:null==c?void 0:c.query.template}:{projectId:i.id};yield t((0,a.U)(m));const{partnerUnpaidItems:{unpaidItems:h}}=o();if(h.length){const t=h.map(e=>e.dphId);const o=l(i,t);null==e||e.highlightSpecial(o)}return t((0,n.hJ)({name:v.B.highlightPartnerUnpaidItems,target:document.body}))}))},8373:function(e,t,o){o.d(t,{X:function(){return d}});var r=o(59312);var n=o(4909);var i=o(55375);var a=o(20347);var s=o(4715);var c=o(6573);const d=(0,i.aP)(c.zG.tryLoadGroupedFonts,({fontTag:e})=>(t,o)=>(0,r.mG)(void 0,void 0,void 0,function*(){const{currentTag:r,groupedFontsLoading:i,groupedFontsLoaded:c,fontTags:d}=o().groupedFonts;const l=undefined;if(!(r===e&&(i||c))){if(!d.includes(e))throw(0,s.n)("stepCombination: tryLoadGroupedFonts was interrupted");if(o().groupedFonts.groupedFontsLoading){if(yield a.V.waitFor([n.Aj.async.done.type]),o().groupedFonts.error)throw(0,s.n)("stepCombination: tryLoadGroupedFonts was interrupted")}else if(yield t((0,n.AX)(e)),yield t((0,n.Aj)()),o().groupedFonts.error)throw(0,s.n)("stepCombination: tryLoadGroupedFonts was interrupted")}}))},10279:function(e,t,o){o.d(t,{C:function(){return s}});var r=o(59312);var n=o(55375);var i=o(58853);var a=o(6573);const s=(0,n.aP)(a.zG.tryLoadProjects,(e={})=>(t,o)=>(0,r.mG)(void 0,void 0,void 0,function*(){const{projects:{projects:r,selectedProjectIds:n,group:a,format:s,customDesignFormatId:c}}=o();const{group:d=a,format:l=s,customDesignFormatId:u=c}=e;const p=d!==a||l!==s||u!==c;const v=undefined;n.length>0&&p&&t((0,i.NQ)()),void 0===e.skip&&(e.skip=p?0:r.length),t((0,i.He)({group:d,format:l,customDesignFormatId:u,skip:e.skip}))}))},4706:function(e,t,o){o.d(t,{Q:function(){return g}});var r=o(59312);var n=o(39014);var i=o(89154);var a=o(2636);var s=o(97087);var c=o(55375);var d=o(61235);var l=o(58853);var u=o(35737);var p=o(26539);var v=o(6573);var m=o(4717);var h=o(40417);var f=o(92526);var y=o(25435);const g=(0,c.aP)(v.zG.tryMoveProjectToTrash,e=>(t,o)=>(0,r.mG)(void 0,void 0,void 0,function*(){const{projects:{loading:c},folders:{trashFolderId:g,activeFolderId:b,isTrashFolderActive:P},auth:{currentUser:j},modal:{popup:T},partner:{currentPartner:w,features:G}}=o();if(c)return;yield Promise.all(e.map(e=>t((0,l.XO)(e))));const{postsByProject:I}=o().projects;if(!T&&(0,u.c)({currentUser:j,currentPartner:w,partnerFeatures:G,key:n.Wz.publishingScheduler,defaultResult:!1})&&e.some(e=>{var t;return!!(null===(t=I[e])||void 0===t?void 0:t.length)}))t((0,d.h7)({popup:m.n.confirmDeleteProjectWithScheduledPosts,options:{ids:e,openedAt:Date.now(),onEscOrOverlayClick:()=>(0,r.mG)(void 0,void 0,void 0,function*(){const{openedAt:t=0}=o().modal.options;const r=(0,i.Z)(Date.now(),t);e.forEach(e=>{(0,p.J)(Object.assign(Object.assign({},h.bb),{eventLabel:e,eventValue:String(r)}))})})}}));else{if(yield t((0,l.Kr)(e)),P)return yield t((0,l.jG)(e)),void t((0,l.NQ)());yield t((0,f.j)({folderId:g,ids:e})),t((0,a.g)(v.JF.projectRemoved,{undoHandler:()=>{t((0,y.z)({folderId:b,ids:e}))},undoGtmOpts:{undoButton:s.rG,closeButton:s.OR}}))}}))},43e3:function(e,t,o){o.d(t,{x:function(){return p}});var r=o(59312);var n=o(88710);var i=o(55375);var a=o(78090);var s=o(6573);var c=o(46387);var d=o(61835);var l=o(90161);var u=o(64564);const p=(0,i.aP)(s.zG.tryMultiResize,({project:e,resizeUrls:t,tooltipTarget:o})=>(i,s)=>(0,r.mG)(void 0,void 0,void 0,function*(){yield i((0,c.a)({popupType:u.B.multiResize}));const r=e||s().projectData.project;a.T.save(l.d.projectToResizeStorageKey,r);const p=t.map(e=>window.open(e,"_blank"));const v=undefined;if(p.some(e=>!e)&&o)return p.map(e=>null==e?void 0:e.close()),void i((0,n.hJ)({name:d.B.allowPopUps,target:o}));t.length&&i((0,n.i8)(d.B.multiResize))}))},66984:function(e,t,o){o.d(t,{p:function(){return u}});var r=o(59312);var n=o(2636);var i=o(97087);var a=o(55375);var s=o(58853);var c=o(6573);var d=o(92526);var l=o(25435);const u=(0,a.aP)(c.zG.tryMultiRestoreProjects,({ids:e,folderId:t=c.ZJ})=>(o,a)=>(0,r.mG)(void 0,void 0,void 0,function*(){const{folders:{activeFolderId:r}}=a();yield o((0,s.Kr)(e)),yield o((0,d.j)({folderId:t,ids:e})),o((0,n.g)(c.JF.projectRestored,{undoHandler:()=>{o((0,l.z)({folderId:r,ids:e}))},undoGtmOpts:{undoButton:i.SK,closeButton:i.Xz}}))}))},92526:function(e,t,o){o.d(t,{j:function(){return s}});var r=o(59312);var n=o(55375);var i=o(58853);var a=o(6573);const s=(0,n.aP)(a.zG.tryMultiUpdateProjects,e=>(t,o)=>(0,r.mG)(void 0,void 0,void 0,function*(){const{projects:{selectedProjectIds:r}}=o();yield t((0,i.J$)(e));const n=undefined;r.includes(e.ids[0])&&t((0,i.NQ)())}))},67099:function(e,t,o){o.d(t,{C:function(){return p}});var r=o(59312);var n=o(48234);var i=o(16025);var a=o(33235);var s=o(1994);var c=o(55375);var d=o(20347);var l=o(89025);var u=o(6573);const p=(0,c.aP)(u.zG.tryOpenApplyMaskPanel,e=>(t,o)=>(0,r.mG)(void 0,void 0,void 0,function*(){const{masks:{items:r},arbiter:{selectedElement:c,workspaceData:{project:{pageWidth:u,pageHeight:p}}}}=o();if(t((0,s.Y4)(i.O.applyMask)),t((0,a.X)(c)),!(0,n.isMaskElement)(c)){0===r.length&&(yield d.V.waitFor([a.W.async.done.type]));const{arbiter:{selectedElement:t},sidebar:{actionsPanel:n}}=o();if(!t||n!==i.O.applyMask)return;const[s]=o().masks.items;null==e||e.applyMaskToElement((0,l.xL)({width:u,height:p},{width:s.width,height:s.height},s))}e.startCrop()}))},62812:function(e,t,o){o.d(t,{t:function(){return u}});var r=o(59312);var n=o(61235);var i=o(55375);var a=o(30322);var s=o(14385);var c=o(6573);var d=o(56564);var l=o(4717);const u=(0,i.aP)(c.zG.tryOpenLogoMakerModal,e=>(t,o)=>(0,r.mG)(void 0,void 0,void 0,function*(){yield t((0,d.y)());const{auth:{currentUser:r},partner:{currentPartner:i}}=o();i||(0,s.xy)(r,i)||(t((0,a.o)()),t((0,n.h7)({popup:l.n.logoMakerModal,options:{shouldCloseOnOverlayClick:!1,brandKitId:e}})))}))},18348:function(e,t,o){o.d(t,{q:function(){return d}});var r=o(59312);var n=o(61235);var i=o(55375);var a=o(6573);var s=o(98572);var c=o(4717);const d=(0,i.aP)(a.zG.tryOpenPostToFacebookBusinessModal,()=>(e,t)=>(0,r.mG)(void 0,void 0,void 0,function*(){yield e((0,s.U)(a._J.share));const{project:o}=t().projectData;e((0,n.h7)({popup:c.n.postToFacebookBusiness,options:{project:o}}))}))},88177:function(e,t,o){o.d(t,{c:function(){return p}});var r=o(59312);var n=o(61235);var i=o(55375);var a=o(29539);var s=o(6573);var c=o(4717);var d=o(49659);var l=o(56564);var u=o(73349);const p=(0,i.aP)(s.zG.tryOpenSubscriptionModal,(e={})=>{var{forceSelectPlan:t,selectedPlan:o,promoCode:i}=e,s=(0,r._T)(e,["forceSelectPlan","selectedPlan","promoCode"]);return(e,p)=>(0,r.mG)(void 0,void 0,void 0,function*(){var r;yield e((0,l.y)()),yield e((0,d.w)()),p().subscriptionPlans.loaded||(yield e((0,a.w)()));let v=o;t&&(v=null===(r=p().subscriptionPlans.list.find(({isAvailableToSwitch:e,type:t})=>e&&(!o||o===t)))||void 0===r?void 0:r.type,!v)||(i&&(yield e((0,u.$)({promoCode:i}))),e((0,n.h7)({popup:c.n.subscriptionModal,options:Object.assign({selectedPlan:v},s)})))})})},22933:function(e,t,o){o.d(t,{J:function(){return f}});var r=o(59312);var n=o(89154);var i=o(61235);var a=o(55375);var s=o(24316);var c=o(21356);var d=o(24687);var l=o(6573);var u=o(49659);var p=o(18376);var v=o(4717);var m=o(17103);var h=o(22483);const f=(0,a.aP)(l.zG.tryOpenSubscriptionRebillModal,()=>(e,t)=>(0,r.mG)(void 0,void 0,void 0,function*(){if(s.Q.get(p.E9.subscriptionRebillModal))return;yield e((0,u.w)()),yield e((0,h.O)()),yield e((0,m.y)());const{auth:{subscription:o},team:{currentTeam:r}}=t();const a=undefined;const l=undefined;if(!((0,c.Rg)(o)&&!!o.failedCount&&!(0,d.SE)(r)))return;e((0,i.h7)({popup:v.n.subscriptionRebillModal}));const f=(0,n.Z)(o.rebillExpiresAt,Date.now());s.Q.set(p.E9.subscriptionRebillModal,"true",{expiresIn:f})}))},46981:function(e,t,o){o.d(t,{V:function(){return b}});var r=o(59312);var n=o(16025);var i=o(67243);var a=o(11429);var s=o(55375);var c=o(1994);var d=o(90658);var l=o(18930);var u=o(57628);var p=o(6573);var v=o(46387);var m=o(56564);var h=o(32222);const f="content-type";const y="image/jpeg";var g=o(64564);const b=(0,s.aP)(p.zG.tryOutline,({arbiterAdapter:e,selectedElement:t})=>(o,b)=>(0,r.mG)(void 0,void 0,void 0,function*(){var r,P;const{auth:{currentUser:j}}=b();yield o((0,m.y)()),(0,u.tw)(j,p.pR.contributor)||(yield o((0,v.a)({popupType:g.B.outline})));const T=null===(r=t.outlineParams)||void 0===r?void 0:r.enabled;const{mediaId:w,uuid:G,dphId:I}=t;const S=w||I||"";const C=(0,l.jj)({mediaId:S,mediaType:p.oZ.screen});const{headers:k}=yield fetch(C);const E=k.get(f);const x=(null===(P=null==t?void 0:t.psParams)||void 0===P?void 0:P.processingType)===h.p.removeBg;if(E!==y||x)o((0,c.BX)(n.k.createOutline)),T||(0,i.B)({arbiter:e,selectedElement:t,updatedFields:a.ds},!0);else{e&&e.setExternalLoader({uuid:G,showExternalLoader:!0});const r=()=>{e&&(o((0,d.nz)({arbiter:e,processingType:h.p.removeBg})),e.setExternalLoader({uuid:G,showExternalLoader:!1}),T||(0,i.B)({arbiter:e,selectedElement:t,updatedFields:a.ds},!0),o((0,c.BX)(n.k.createOutline)))};const l=()=>{e&&o((0,d.iZ)({arbiter:e}))};yield o((0,s.t5)(p.zG.toggleImageBackground,{onSuccess:r,onError:l,mediaId:w,dphId:I,elementUuid:G,arbiter:e}))}}))},84764:function(e,t,o){o.d(t,{n:function(){return p}});var r=o(59312);var n=o(55375);var i=o(12921);var a=o(53792);var s=o(70874);var c=o(4715);var d=o(6573);var l=o(32707);var u=o(46387);const p=(0,n.aP)(d.zG.tryPostToFacebookBusiness,e=>(t,o)=>(0,r.mG)(void 0,void 0,void 0,function*(){const{project:r}=o().projectData;if(!(0,s.X)(r))throw(0,c.n)("chain: tryPostToFacebookBusiness was interrupted");(0,a.hP)(r)&&(yield t((0,u.a)())),yield t((0,l.Y)(r)),yield t((0,i.M4)({params:e,project:r}))}))},59750:function(e,t,o){o.d(t,{O:function(){return u}});var r=o(59312);var n=o(88710);var i=o(55375);var a=o(50692);var s=o(6573);var c=o(13596);var d=o(75410);var l=o(61835);const u=(0,i.aP)(s.zG.tryPublishPartnerTemplate,({isPublished:e,arbiter:t})=>(o,i)=>(0,r.mG)(void 0,void 0,void 0,function*(){if(e){yield o((0,d.v)({arbiter:t}));const{partnerUnpaidItems:{unpaidItems:e}}=i();if(e.length)return;o((0,n.i8)(l.B.highlightPartnerUnpaidItems))}yield o((0,a.UI)({published:e})),yield o((0,c.P)())}))},84172:function(e,t,o){o.d(t,{y:function(){return c}});var r=o(59312);var n=o(2636);var i=o(55375);var a=o(75551);var s=o(6573);const c=(0,i.aP)(s.zG.tryRemoveCard,({card:e})=>t=>(0,r.mG)(void 0,void 0,void 0,function*(){try{yield t((0,a.yJ)(e)),t((0,n.g)(s.JF.cardRemoved))}catch(e){t((0,n.g)(s.JF.removeCardError))}}))},78680:function(e,t,o){o.d(t,{R:function(){return v}});var r=o(59312);var n=o(2636);var i=o(97087);var a=o(55375);var s=o(54359);var c=o(58853);var d=o(6573);var l=o(92526);var u=o(10279);const p=(0,a.aP)(d.zG.tryUndoRemoveProjectFolder,({folderId:e,folderName:t})=>(o,n)=>(0,r.mG)(void 0,void 0,void 0,function*(){const{projects:{foldersProjectIds:r},folders:{activeFolderId:i,isTrashFolderActive:a}}=n();yield o((0,s.yx)({name:t,folderType:CONFIG.FOLDER_TYPES.project}));const{folders:{folders:c}}=n();const p=r[e];const v=c[0];p.length&&v&&(yield o((0,l.j)({folderId:v.id,ids:p})),(i===d.ZJ||a)&&o((0,u.C)({skip:0})))}));const v=(0,a.aP)(d.zG.tryRemoveProjectFolder,e=>(t,o)=>(0,r.mG)(void 0,void 0,void 0,function*(){const r=o().folders.folders.find(t=>t.id===e);yield t((0,c.ll)(e)),yield t((0,s.Ih)({folderId:e,folderType:CONFIG.FOLDER_TYPES.project})),t((0,n.g)(d.JF.folderRemoved,{undoHandler:()=>{r&&t(p({folderName:r.name,folderId:e}))},undoGtmOpts:{undoButton:i.lZ,closeButton:i.K6}})),t((0,c.NQ)())}))},21985:function(e,t,o){o.d(t,{z:function(){return m}});var r=o(59312);var n=o(2636);var i=o(59210);var a=o(85393);var s=o(61235);var c=o(55375);var d=o(1302);var l=o(26951);var u=o(19630);var p=o(6573);var v=o(4717);const m=(0,c.aP)(p.zG.tryRemoveUpload,({ids:e,showNotification:t=!0})=>(o,c)=>(0,r.mG)(void 0,void 0,void 0,function*(){const{brandKits:m,folders:{activeFolderId:h},projectData:{project:f},common:{locale:y},team:{currentTeam:g}}=c();let b=e;const P=[];const j=(0,i.Lx)(m,f.brandKitId);if(j&&j.logos&&(b=yield e.reduce((e,t)=>(0,r.mG)(void 0,void 0,void 0,function*(){const r=yield e;const{logos:n}=(0,i.Lx)(c().brandKits,f.brandKitId);const a=n.find(({data:{mediaId:e}})=>e===t);return a?new Promise(e=>{o((0,s.h7)({popup:v.n.brandKitRemoveConfirm,options:{onConfirm:()=>{o((0,d.kQ)({id:a.data.id,brandKitId:j.id})),P.push(o((0,d.b2)({brandKitId:j.id}))),e([...r,t])},onCancel:()=>{e(r)},title:(0,u.Z)(y,"b_kit_delete_logo_title"),textBeforeName:(0,u.Z)(y,"b_kit_delete_logo_from_uploads_before"),name:a.data.originalName,textAfterName:(0,u.Z)(y,"b_kit_delete_logo_from_uploads_after")}}))}):[...r,t]}),Promise.resolve([]))),0!==b.length)return yield o((0,a.w7)({ids:b,teamId:null==g?void 0:g.id,activeFolderId:h})),yield Promise.all(P),o((0,l.SP)()),t?o((0,n.g)(p.JF.uploadRemoved)):void 0}))},72935:function(e,t,o){o.d(t,{f:function(){return f}});var r=o(59312);var n=o(7790);var i=o(55375);var a=o(75551);var s=o(18414);var c=o(80363);var d=o(74521);var l=o(4715);var u=o(57628);var p=o(92326);var v=o(6573);var m=o(20576);var h=o(14439);const f=(0,i.aP)(v.zG.tryReplaceCard,({userData:e,cardData:t,currentPlan:o=null,isTransferringPaymentProvider:i})=>(f,y)=>(0,r.mG)(void 0,void 0,void 0,function*(){var r;const{auth:{currentUser:g},subscriptionPlans:{list:b},jwtTokens:{billingToken:P}}=y();P||(yield f((0,s.l)()));try{yield f((0,a.LG)({cardData:t,userData:(0,d.jT)({userData:e,currentUser:g}),merchant:m.m_.adyen,currency:null===(r=b[0])||void 0===r?void 0:r.currency}))}catch(e){throw(0,l.n)("chain: tryReplaceCard was interrupted")}const{threeDsResponse:j}=y().paymentCard;if(null==j?void 0:j.form){if(!(0,u.tw)(g,v.pR.new3dsTester))throw yield f((0,c.X)(o,n.j.card,m.m_.adyen,i)),(0,p.y)(j.form),(0,l.n)("tryReplaceCard: 3Ds redirect");yield f((0,h.f)())}}))},13596:function(e,t,o){o.d(t,{P:function(){return c}});var r=o(59312);var n=o(55375);var i=o(6573);var a=o(56564);var s=o(4423);const c=(0,n.aP)(i.zG.saveProject,({popup:e}={})=>t=>(0,r.mG)(void 0,void 0,void 0,function*(){yield t((0,a.y)({popup:e,source:i._J.save})),yield t((0,s.P)())}))},43559:function(e,t,o){o.d(t,{r:function(){return c}});var r=o(59312);var n=o(55375);var i=o(54359);var a=o(58853);var s=o(6573);const c=(0,n.aP)(s.zG.trySetActiveProjectFolder,e=>(t,o)=>(0,r.mG)(void 0,void 0,void 0,function*(){o().folders.activeFolderId!==e&&(t((0,a.dO)()),t((0,i.Yi)(e)),t((0,a.NQ)()))}))},38194:function(e,t,o){o.d(t,{S:function(){return T}});var r=o(59312);var n=o(87125);var i=o(55375);var a=o(20347);var s=o(49888);var c=o(6573);var d=o(40877);var l=o(62189);var u=o(24316);var p=o(82726);var v=o(18376);var m=o(66970);var h=o(61835);var f=o(22559);const y=-12;const g=31;const b=[h.B.animationsTourTip];const P=(0,l.$S)("animationsTourTip");const j={steps:[{tooltipKey:h.B.animationsTourTip,options:{title:"animation_tooltip_title",description:"animation_tooltip_body",buttonType:p.L.okGotIt,overridePosition:(e,t)=>{const{left:o,top:r,width:n}=(0,l.au)(t);return{left:o+n+g,top:r+y}},gtmOptions:P(1,"buttonGotIt"),pinClassName:f.Z.leftTop,stepClassName:f.Z.wideTip}}],shouldShowTour:e=>{const{auth:{currentUser:t},common:{currentPage:o},partner:{currentPartner:r}}=e;return!!t.id&&("0"!==u.Q.get(v.E9.animationsTour)&&m.s.artBoard===o&&!Boolean(r))},cookieKey:v.E9.animationsTour};const T=(0,i.aP)(c.zG.tryShowAnimationTour,()=>(e,t)=>(0,r.mG)(void 0,void 0,void 0,function*(){const{arbiter:{isReady:o}}=t();o||(yield a.V.waitFor([n.NU])),yield Promise.race([e((0,d.e)({chainName:c.zG.tryShowAnimationTour,tour:j})),a.V.waitFor([s.B8])])}))},84684:function(e,t,o){o.d(t,{E:function(){return h}});var r=o(59312);var n=o(55375);var i=o(24316);var a=o(14385);var s=o(57628);var c=o(21356);var d=o(18376);var l=o(64564);const u=({subscription:e,isTrialAvailable:t})=>(0,c.BZ)(e)||!t||i.Q.get(d.E9.isNewSubscriptionStepsModalShown)?l.B.subscriptionModalArtboardTabs:l.B.subscriptionModalArtboardSteps;var p=o(6573);var v=o(89461);var m=o(46387);const h=(0,n.aP)(p.zG.showSubscriptionModalArtboard,()=>(e,t)=>(0,r.mG)(void 0,void 0,void 0,function*(){const{auth:{currentUser:o,subscription:r},partner:{currentPartner:n},modal:{popup:c},subscriptionPlans:{isTrialAvailable:d}}=t();const l=undefined;if(o.id&&!(0,s.tw)(o,p.pR.contributor)&&!c&&!(0,a.Ye)(n)&&!(0,a.xy)(o,n)&&!i.Q.get(v.E.isSubscriptionModalShown)){const t=u({subscription:r,isTrialAvailable:d});yield e((0,m.a)({popupType:t}))}}))},14161:function(e,t,o){o.d(t,{C:function(){return E}});var r=o(59312);var n=o(87125);var i=o(88710);var a=o(87323);var s=o(1994);var c=o(55375);var d=o(3681);var l=o(20347);var u=o(6573);var p=o(40877);var v=o(24316);var m=o(62189);var h=o(82726);var f=o(18376);var y=o(66970);var g=o(61835);var b=o(22559);const P=(0,m.$S)("videoEditorTourTips");const j=9;const T=15;const w=36;const G=10;const I=55;const S=140;const C=[g.B.videoEditorTourTip1,g.B.videoEditorTourTip2,g.B.videoEditorTourTip3];const k={steps:[{tooltipKey:g.B.videoEditorTourTip1,options:{title:"tour_timeline_title",description:"tour_timeline_body",buttonType:h.L.next,currentStep:1,totalSteps:C.length,overridePosition:(e,t,o,r)=>{const n=(null==r?void 0:r.getBoundingClientRect().height)||0;const{left:i,top:a}=(0,m.au)(t);return{left:i+9,top:a-n-T}},gtmOptions:P(1,"buttonNext"),pinClassName:b.Z.bottomLeft,stepClassName:b.Z.wideTip}},{tooltipKey:g.B.videoEditorTourTip2,options:{title:"tour_timeline_trim_title",description:"tour_timeline_trim_body",buttonType:h.L.next,currentStep:2,totalSteps:C.length,tipVideo:{src:"videos/tutorials/video-editor-tour-1.mp4",poster:"videos/tutorials/video-editor-tour-1.jpg",height:S},overridePosition:(e,t,o,r)=>{const n=(null==r?void 0:r.getBoundingClientRect().height)||0;const{left:i,top:a,width:s}=(0,m.au)(t);return{left:i+s/2-w,top:a-n-G}},gtmOptions:P(2,"buttonNext"),pinClassName:b.Z.bottomLeft,stepClassName:b.Z.wideTip}},{tooltipKey:g.B.videoEditorTourTip3,options:{title:"tour_timeline_split_title",description:"tour_timeline_split_body",buttonType:h.L.okGotIt,currentStep:3,totalSteps:C.length,tipVideo:{src:"videos/tutorials/video-editor-tour-2.mp4",poster:"videos/tutorials/video-editor-tour-2.jpg",height:S},overridePosition:(e,t,o,r)=>{const n=(null==r?void 0:r.getBoundingClientRect().height)||0;const{left:i,top:a,width:s}=(0,m.au)(t);return{left:i+s-I,top:a-n-G}},gtmOptions:P(3,"buttonGotIt"),pinClassName:b.Z.bottomLeft,stepClassName:b.Z.wideTip}}],shouldShowTour:e=>{const{auth:{currentUser:t},artboard:{isPageTimelineVisible:o},common:{currentPage:r},partner:{currentPartner:n}}=e;return!(Number(v.Q.get(f.E9.videoEditorTourViewed))+1===k.steps.length-1&&!t.id)&&(o&&Number(v.Q.get(k.cookieKey))<k.steps.length-1&&y.s.artBoard===r&&!Boolean(n))},cookieKey:f.E9.videoEditorTourViewed};const E=(0,c.aP)(u.zG.tryShowVideoEditorTour,()=>(e,t)=>(0,r.mG)(void 0,void 0,void 0,function*(){const{artboard:{isPageTimelineVisible:o},arbiter:{isReady:r}}=t();o&&(r||(yield l.V.waitFor([n.NU])),yield Promise.race([e((0,p.e)({chainName:u.zG.tryShowVideoEditorTour,tour:k})),l.V.waitFor([d.XS,a.c8.type,s.GB.type])]),e((0,i.i8)(C)))}))},84875:function(e,t,o){o.d(t,{L:function(){return P}});var r=o(59312);var n=o(7790);var i=o(61235);var a=o(51023);var s=o(55375);var c=o(18414);var d=o(80363);var l=o(4715);var u=o(74521);var p=o(57628);var v=o(92326);var m=o(6573);var h=o(20576);var f=o(1398);var y=o(72935);var g=o(14439);var b=o(4717);const P=(0,s.aP)(m.zG.trySubscribeWithCard,({currentPlan:e,userData:t,cardData:o,payMethod:s,isTrial:P})=>(j,T)=>(0,r.mG)(void 0,void 0,void 0,function*(){if(T().jwtTokens.billingToken||(yield j((0,c.l)())),P){yield j((0,y.f)({userData:t,cardData:o,currentPlan:e}));const{paymentCard:{error:r},modal:{options:{isExternalError:n}}}=T();if(r||n)throw(0,l.n)("chain: trySubscribeWithCard was interrupted");const{type:i,planId:a,promo:s}=e;return void j((0,f.L)({type:i,planId:a,isTrial:P,promoId:s.id}))}yield j((0,a.pz)({currentPlan:e,merchant:h.m_.adyen}));const{userSubscription:{initSubscription:r},auth:{currentUser:w}}=T();if(!r)throw(0,l.n)("chain: trySubscribeWithCard was interrupted");const G={paymentInfo:(0,v.P)(r),userData:(0,u.jT)({userData:t,currentUser:w})};s===n.j.card&&(yield j((0,a.p0)(Object.assign(Object.assign({},G),{cardData:o})))),s===n.j.googlePay&&(yield j((0,a.wl)(Object.assign(Object.assign({},G),{googlePayData:o}))));const{threeDsResponse:I}=T().userSubscription;if(null==I?void 0:I.form){if(!(0,p.tw)(w,m.pR.new3dsTester))throw yield j((0,d.X)(e,s,h.m_.adyen)),(0,v.y)(I.form),(0,l.n)("chain: trySubscribeWithCard: was interrupted");yield j((0,g.f)())}j((0,i.h7)({popup:b.n.subscriptionSuccessfulModal}))}))},92326:function(e,t,o){o.d(t,{P:function(){return r},y:function(){return n}});const r=e=>{const{rebillAmount:t,firstChargeAmount:o,invoice:r,planId:n}=e;return{rebillAmount:t,firstChargeAmount:o,planId:n,merchant:r.merchant,planType:r.subscriptionType,invoiceIntegerId:r.integerId}};const n=e=>{const{method:t,url:o,data:r}=e;const n=document.createElement("form");n.style.display="none",n.method=t,n.action=o,n.target="_top",Object.entries(r).forEach(([e,t])=>{const o=document.createElement("input");o.type="hidden",o.name=e,o.value=t,n.appendChild(o)}),window.document.body.appendChild(n),n.submit()}},42437:function(e,t,o){o.d(t,{m:function(){return m}});var r=o(59312);var n=o(16025);var i=o(55375);var a=o(1994);var s=o(90658);var c=o(57628);var d=o(6573);var l=o(46387);var u=o(56564);var p=o(32222);var v=o(64564);const m=(0,i.aP)(d.zG.tryToRemoveBackground,({canEdit:e,canUndo:t,arbiter:o,shouldPurchaseSubscription:m})=>(h,f)=>(0,r.mG)(void 0,void 0,void 0,function*(){const{arbiter:{selectedElement:r},auth:{currentUser:y}}=f();const{mediaId:g,dphId:b,uuid:P}=r;m&&!(0,c.tw)(y,d.pR.contributor)&&(yield h((0,u.y)()),yield h((0,l.a)({popupType:v.B.backgroundRemoval}))),e?h((0,a.BX)(n.k.removeBackground)):(t&&h((0,a.BX)(null)),o.setExternalLoader({uuid:P,showExternalLoader:!0}),h((0,i.t5)(d.zG.toggleImageBackground,{onSuccess:()=>{h((0,a.BX)(n.k.removeBackground)),h((0,s.nz)({arbiter:o,processingType:p.p.removeBg})),o.setExternalLoader({uuid:P,showExternalLoader:!1}),h((0,a.BX)(n.k.removeBackground))},onError:()=>h((0,s.iZ)({arbiter:o})),mediaId:g,dphId:b,elementUuid:P,arbiter:o})))}))},49650:function(e,t,o){o.d(t,{W:function(){return d}});var r=o(59312);var n=o(2636);var i=o(55375);var a=o(29746);var s=o(3598);var c=o(6573);const d=(0,i.aP)(c.zG.tryToUpdateMailingPreference,({queryParams:e,settings:t})=>(o,i)=>(0,r.mG)(void 0,void 0,void 0,function*(){const{common:{userAgent:{isMobile:r}},auth:{currentUser:d}}=i();const l=t.unsubscribedFromAll?c.JF.mailingUnsibscribeFromAll:c.JF.mailingUpdatePreference;yield o((0,a.gz)({queryParams:e,settings:t})),o((0,n.g)(l)),!r&&d.id||!t.unsubscribedFromAll||(yield(0,s._)(3e3),window.location.href="/")}))},25435:function(e,t,o){o.d(t,{z:function(){return d}});var r=o(59312);var n=o(55375);var i=o(58853);var a=o(6573);var s=o(92526);var c=o(10279);const d=(0,n.aP)(a.zG.tryUndoMultiUpdateProjects,({ids:e,folderId:t=a.ZJ})=>o=>(0,r.mG)(void 0,void 0,void 0,function*(){yield o((0,i.Kr)(e)),yield o((0,s.j)({folderId:t,ids:e})),o((0,c.C)({skip:0}))}))},1398:function(e,t,o){o.d(t,{L:function(){return u}});var r=o(59312);var n=o(61235);var i=o(55375);var a=o(33921);var s=o(29539);var c=o(64196);var d=o(6573);var l=o(4717);const u=(0,i.aP)(d.zG.tryUpgradeSubscription,({type:e,planId:t,isTrial:o=!1,promoId:i})=>d=>(0,r.mG)(void 0,void 0,void 0,function*(){yield d((0,c.dP)(e,t,{isTrial:o,promoId:i})),d((0,a.LK)()),d((0,s.w)()),d((0,n.h7)({popup:l.n.subscriptionSuccessfulModal}))}))},84396:function(e,t,o){o.d(t,{k:function(){return h}});var r=o(59312);var n=o(85393);var i=o(893);var a=o(61235);var s=o(55375);var c=o(30322);var d=o(1994);var l=o(1302);var u=o(4715);var p=o(24310);var v=o(6573);var m=o(54649);const h=(0,s.aP)(v.zG.tryUploadLogoMakerItem,({logoId:e,sherbertVersion:t,brandKitId:o,arbiter:s})=>(h,f,y)=>(0,r.mG)(void 0,void 0,void 0,function*(){yield h((0,c.D)({logoId:e,sherbertVersion:t}));const{modal:{popup:r},logoMaker:{logoItems:g}}=f();if(!r||!g)throw g&&y.delete(i._9,{ids:[g[m.i.logoPng].id,g[m.i.logoTransparentPng].id]}),(0,u.n)("chain: tryUploadLogoMakerItem was interrupted");if(o)return h((0,l.Cv)({files:Object.values(g),brandKitId:o})),void h((0,a.Mr)());const[b]=(0,p.St)(v.Pp.uploads,[g[m.i.logoTransparentPng]]);null==s||s.addElementWithScale(b),h((0,n.n7)({skip:0,sort:v.FQ.byCreatedDesc})),h((0,d.JW)({activeSidebarTab:v.Gj.library})),h((0,a.Mr)())}))},99580:function(e,t,o){o.d(t,{d:function(){return T}});var r=o(59312);var n=o(48234);var i=o(85393);var a=o(55375);var s=o(1994);var c=o(61235);var d=o(24310);var l=o(26539);var u=o(75513);const p=(e,t)=>e.some(e=>e.uuid===t||!!(0,n.isGroupElement)(e)&&p(e.elements,t));var v=o(6573);var m=o(4717);var h=o(71697);var f=o(3598);const y=1500;const g=e=>t=>(0,r.mG)(void 0,void 0,void 0,function*(){const{status:o}=yield t((0,i.v_)(e));o===v.M1.initial&&(yield(0,f._)(y),yield t(g(e)))});var b=o(87125);var P=o(20347);const j=e=>(t,o)=>(0,r.mG)(void 0,void 0,void 0,function*(){var r;const{arbiter:{workspaceData:i}}=o();i.mode!==n.WorkspaceMode.Initial&&e===(null===(r=i.selectionFrame.selectedElement)||void 0===r?void 0:r.uuid)&&(yield P.V.waitFor([b.eK]),yield t(j(e)))});const T=(0,a.aP)(v.zG.tryUploadPhotoToMask,({photoFile:e,arbiter:t})=>(o,a)=>(0,r.mG)(void 0,void 0,void 0,function*(){if(!CONFIG.allowedImageUploadMimetypes.includes(e.type))return void o((0,c.h7)({popup:m.n.uploadError,options:{uploadModalErrorType:h.k.photos}}));const{arbiter:{selectedElement:{uuid:r}}}=a();o((0,s.JW)({activeSidebarTab:v.Gj.library})),t.setExternalLoader({uuid:r,showExternalLoader:!0});const{result:[f],errors:y}=yield o((0,i.LI)([e],{uploadModalErrorType:h.k.photos}));if(y.length)return void t.setExternalLoader({uuid:r,showExternalLoader:!1});yield o(g(f.id)),yield o(j(r));const b=a().arbiter.workspaceData.project.pages.flatMap(({elements:e})=>e);p(b,r)&&(t.setExternalLoader({uuid:r,showExternalLoader:!1}),t.tryOnTry(r,(0,d.St)(v.Pp.uploads,[f])[0],n.FitImageMode.Cover),t.tryOnFinish(r),(0,l.J)({event:u.GM.gaEv,eventCategory:"tools",eventAction:"mask",eventLabel:"usedMaskPhotoButton"}))}))},9042:function(e,t,o){o.d(t,{e:function(){return l}});var r=o(59312);var n=o(55375);var i=o(81465);var a=o(59556);var s=o(97754);var c=o(6573);var d=o(56564);const l=(0,n.aP)(c.zG.tryUseProjectAsTemplate,({projectId:e})=>(t,o)=>(0,r.mG)(void 0,void 0,void 0,function*(){yield t((0,d.y)()),yield t((0,i.lP)(e));const{common:{language:r},team:{currentTeam:n},shareProject:{copiedProjectId:c}}=o();null===s.m||void 0===s.m||s.m.push((0,a.jq)({currentTeam:n,language:r,projectId:c}))}))},30440:function(e,t,o){o.d(t,{R:function(){return p}});var r=o(59312);var n=o(37229);var i=o(88710);var a=o(55375);var s=o(40943);var c=o(18930);var d=o(6573);var l=o(56564);var u=o(61835);const p=(0,a.aP)(d.zG.updateFavorite,e=>(t,o)=>(0,r.mG)(void 0,void 0,void 0,function*(){const{sidebar:{activeSidebarTab:r},favorites:a}=o();const{dphId:p,mediaId:v,previewPath:m}=e;const h=v||p||"";const f=a[h];const y=(0,n.W)(e);const g=m||(0,c.jj)({mediaId:h,mediaType:d.oZ.thumb});yield t((0,l.y)({authPreviewPath:g})),t((0,s.R3)({favoriteMediaId:h,isFavorite:!f,favoriteType:y})),f||r===d.Gj.favorites||t((0,i.hJ)({name:u.B.favoriteNotification,target:document.body,options:{item:Object.assign(Object.assign({},e),{previewPath:g}),isFavorite:!0,favoriteType:y}}))}))},88245:function(e,t,o){o.d(t,{H:function(){return v}});var r=o(59312);var n=o(37619);var i=o.n(n);var a=o(55375);var s=o(64196);var c=o(61235);var d=o(59725);var l=o(6573);var u=o(32218);const p="/api/users";const v=(0,a.aP)(l.zG.updateMailSubscriptionStatus,({mailSubscriptionObject:e,isModal:t})=>(o,i,a)=>(0,r.mG)(void 0,void 0,void 0,function*(){var r;const{auth:{error:v}}=i();if(t)return o((0,s.Nq)(e)),void o((0,c.Mr)());yield a.put(p,e);const m=(0,n.deepCopy)(null===(r=null==v?void 0:v.context)||void 0===r?void 0:r.authResponse);m.user.mailSubscription=e.mailSubscription,m.user.marketingMetaData["isGdprMailSubscriptionFilled"]=e.marketingMetaData.isGdprMailSubscriptionFilled,o({type:`${d.w8}_${l.YT.rejected}`,payload:{context:{authResponse:m},caption:u.v.userProfilingRequired}})}))},30099:function(e,t,o){o.d(t,{h:function(){return u}});var r=o(59312);var n=o(39014);var i=o(86750);var a=o(55375);var s=o(86047);var c=o(6573);var d=o(56564);var l=o(51717);const u=(0,a.aP)(c.zG.uploadPartnerImages,({arbiter:e,payload:t,project:o})=>(a,u)=>(0,r.mG)(void 0,void 0,void 0,function*(){const{image:p,images:v,addAsBg:m}=t;const h=()=>(0,r.mG)(void 0,void 0,void 0,function*(){yield a((0,d.y)());const t=yield a((0,l.p)(p?[p]:v,c.Yj.imageElement));const r=Object.values(t).filter(e=>!!e);if(!(null==r?void 0:r.length))throw new Error("All image urls are broken, please try again with valid url");const n=(0,i.Ku)(r,o);yield Promise.all(n.map(t=>e.addElementAndWaitForLoad(t,{addAsBg:m})))});let f=n.kR.addImagesCompleted;let y=n.kR.addImagesFailed;m&&(f=n.kR.addBackgroundImageCompleted,y=n.kR.addBackgroundImageFailed),(0,s.eb)({completedEventType:f,failedEventType:y,eventId:t.eventId,callback:h,partnerFrameId:u().partner.frameId})}))},52287:function(e,t,o){o.d(t,{F:function(){return h}});var r=o(59312);var n=o(55375);var i=o(13471);var a=o(61235);var s=o(97754);var c=o(59556);var d=o(2636);var l=o(6573);var u=o(32218);const p="/api/marketplace-templates";const v=(0,n.aP)(l.zG.sendMarketplaceTemplatesForReview,e=>(t,o,n)=>(0,r.mG)(void 0,void 0,void 0,function*(){let o=l.JF.userTemplateSubmitForReviewSuccess;try{yield n.post(p,e)}catch(e){switch(e.caption){case u.v.projectHasUploads:o=l.JF.buyoutTemplateSubmitForReviewUploadsError;break;case u.v.projectHasUnlimitedPlusContent:o=l.JF.buyoutTemplateSubmitForReviewUnlimitedPlusError;break;case u.v.projectHasEditorialContent:o=l.JF.userTemplateEditorialError;break;case u.v.userTemplateIsADuplicate:o=l.JF.userTemplateDuplicateError;break;default:o=l.JF.userTemplateSubmitForReviewError}}t((0,d.g)(o))}));var m=o(4717);const h=(0,n.aP)(l.zG.userTemplateSubmit,e=>(t,o)=>(0,r.mG)(void 0,void 0,void 0,function*(){const{common:{language:r},team:{currentTeam:n},projectData:{project:{id:d,format:u,previewPath:p,isMarketplaceProject:h}}}=o();d&&(h&&e?yield t(v({projectId:d,templateMeta:e})):yield t((0,i.hW)({projectId:d}))),null===s.m||void 0===s.m||s.m.push((0,c.jq)({currentTeam:n,language:r}),{activeFolderId:h?l.Ir:l.kB}),t((0,a.h7)({popup:m.n.userTemplateSubmitSuccessfulModal,options:{format:u,previewPath:p,isMarketplaceProject:h}}))}))},10114:function(e,t,o){o.d(t,{s:function(){return u}});var r=o(59312);var n=o(55375);var i=o(88135);var a=o(45199);var s=o(61235);var c=o(6573);var d=o(4423);var l=o(4717);const u=(0,n.aP)(c.zG.userTemplateSubmitModal,()=>(e,t)=>(0,r.mG)(void 0,void 0,void 0,function*(){yield e((0,d.P)());const{projectData:{project:{briefId:o,id:r,isMarketplaceProject:n}}}=t();o&&r&&(yield Promise.all([e((0,i.q)({briefId:o})),e((0,a.O)({projectId:r}))])),n&&r&&(yield e((0,a.O)({projectId:r,isMarketplaceProject:n}))),e((0,s.h7)({popup:l.n.userTemplateSubmit}))}))},4715:function(e,t,o){o.d(t,{n:function(){return n}});class r extends Error{constructor(e){var t;super(e),null===(t=Error.captureStackTrace)||void 0===t||t.call(Error,this,r)}}const n=e=>{const t=new r(e);return t.chainWasInterrupted=!0,t}},62189:function(e,t,o){o.d(t,{iN:function(){return n},$S:function(){return i},Ny:function(){return a},au:function(){return s}});var r=o(55375);const n=e=>t=>(0,r.Oh)(e,{tourStepIndex:t,processAction:!0});const i=e=>(t,o)=>({next:{categ:e,subcateg:"click",value:`step_${t}/${o}`},cancel:{categ:e,subcateg:"click",value:`step_${t}/Close`}});const a=e=>{const{currentTarget:t}=e;return t instanceof Element?t:null};const s=e=>{var t,o;return null!==(o=null===(t=a(e))||void 0===t?void 0:t.getBoundingClientRect())&&void 0!==o?o:new DOMRect}}}]);